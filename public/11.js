(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{PmLk:function(s,t,e){"use strict";e.r(t);var o={data:function(){return{username:"",password:"",autologin:!1,password_show:!1,username_disabled:!0,password_disabled:!0,login_disabled:!0,logging:!1}},components:{msg:e("v9aq").a},computed:{error:function(){return this.$store.state.error},api_prefix:function(){return this.$store.state.api_prefix}},activated:function(){document.title="登入"},methods:{pw_title:function(){return this.password_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.password_show?"text":"password"},password_toggle_button:function(s){this.password_show=s.target.checked},ban_login:function(){this.username_disabled=this.username.length<=0,this.password_disabled=this.password.length<=0,this.login_disabled=this.username_disabled||this.password_disabled},to_register:function(){this.$router.push({name:"register"})},login_click:function(){var s=this;if(!this.login_disabled){this.logging=!0;var t=this.api_prefix.concat("login");this.$refs.login.focus(),axios.get(t,{params:{username:this.username,password:this.password,autologin:this.autologin}}).then((function(t){var e=t.status,o=t.message,a=t.token;e?(localStorage.token=a,document.location.href="/"):(s.password="",s.password_disabled=!0,s.autologin=!1,s.login_disabled=!0,s.logging=!1,s.$store.commit("show_error",o))})).catch((function(t){if(422===t.status){var e="",o=t.data.errors;Object.keys(o).forEach((function(s){e+=o[s]+"\n"})),s.$store.commit("show_error",e)}else s.$store.commit("show_error","發生錯誤: "+t.statusText);s.logging=!1}))}},login_enter:function(){var s=this;document.onkeydown=function(t){console.log(t),13===t.keyCode&&s.login_click()}}}},a=e("KHd+"),r=Object(a.a)(o,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-md-8",on:{keyup:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.login_click(t)}}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[s._v("Login")]),s._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者名稱")]),s._v(" "),e("div",{staticClass:"col-md-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.username_disabled),attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:s.username},on:{input:[function(t){t.target.composing||(s.username=t.target.value)},s.ban_login]}})])]),s._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者密碼")]),s._v(" "),e("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{input:s.ban_login,change:function(t){var e=s.password,o=t.target,a=!!o.checked;if(Array.isArray(e)){var r=s._i(e,null);o.checked?r<0&&(s.password=e.concat([null])):r>-1&&(s.password=e.slice(0,r).concat(e.slice(r+1)))}else s.password=a}}}):"radio"===s.pw_type()?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{input:s.ban_login,change:function(t){s.password=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:s.pw_type()},domProps:{value:s.password},on:{input:[function(t){t.target.composing||(s.password=t.target.value)},s.ban_login]}})]),s._v(" "),e("div",{staticClass:"show-hide-toggle-button"},[e("input",{attrs:{type:"checkbox",id:"password-toggle-button"},on:{click:s.password_toggle_button}}),s._v(" "),e("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"password-toggle-button",title:s.pw_title()}},[s._v("Toggle")])])]),s._v(" "),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-md-6 offset-md-4"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.autologin,expression:"autologin"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.autologin)?s._i(s.autologin,null)>-1:s.autologin},on:{change:function(t){var e=s.autologin,o=t.target,a=!!o.checked;if(Array.isArray(e)){var r=s._i(e,null);o.checked?r<0&&(s.autologin=e.concat([null])):r>-1&&(s.autologin=e.slice(0,r).concat(e.slice(r+1)))}else s.autologin=a}}}),s._v(" "),e("label",{staticClass:"form-check-label"},[s._v("自動登入")])])])]),s._v(" "),e("div",{staticClass:"form-group row mb-0"},[e("div",{staticClass:"col-md-8 offset-md-4"},[e("button",{ref:"login",staticClass:"btn btn-primary",class:{"btn-loading":s.logging},attrs:{type:"button",disabled:"",disabled:s.login_disabled},on:{click:s.login_click}},[s._v("登入")]),s._v(" "),e("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:s.to_register}},[s._v("前往註冊")])])])]),s._v(" "),s.error.status?e("div",{staticClass:"card-footer"},[e("msg",{staticStyle:{"text-align":"center"}},[s._v(s._s(s.error.message))])],1):s._e()])])}),[],!1,null,null,null);t.default=r.exports},v9aq:function(s,t,e){"use strict";var o;e.d(t,"a",(function(){return i}));var a,r,i=e("nFaw").a.div(o||(a=["\n    color: #9A0000;\n"],r||(r=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))}}]);