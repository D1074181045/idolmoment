(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{mNwH:function(t,e,a){"use strict";a.r(e);var i={data:function(){return{nickname:"",build_disabled:!0,creating:!1}},components:{msg:a("v9aq").a},created:function(){document.title="創建偶像"},computed:{error:function(){return this.$store.state.error},api_prefix:function(){return this.$store.state.api_prefix}},methods:{build:function(){var t=this;if(!this.build_disabled){this.creating=!0;var e=this.api_prefix.concat("store-profile");axios.post(e,{nickname:this.nickname}).then((function(e){var a=e.status,i=e.message;a?t.$store.dispatch("load_my_profile").then((function(){t.$router.push({name:"index"})})):(t.$store.commit("show_error",i),t.creating=!1,t.build_disabled=!1)})).catch((function(e){if(422===e.status){var a="",i=e.data.errors;Object.keys(i).forEach((function(t){a+=i[t]+"\n"})),t.$store.commit("show_error",a)}else t.$store.commit("show_error","發生錯誤: "+e.statusText);t.creating=!1,t.build_disabled=!1}))}},ban_build:function(){var t=new RegExp("^[㄀-ㄯ一-龥a-zA-Z0-9]+$");this.build_disabled=!this.nickname.match(t)||0===this.nickname.length||this.nickname.length>12}}},s=a("KHd+"),r=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{color:"var(--form-control-color)"}},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"card",staticStyle:{"background-color":"var(--form-control-bg-color)"}},[a("div",{staticClass:"card-header"},[t._v("建立暱稱")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("暱稱")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.build_disabled),staticStyle:{width:"100%"},attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:t.nickname},on:{input:[function(e){e.target.composing||(t.nickname=e.target.value)},t.ban_build]}}),t._v(" "),a("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[t._v("最多12字元，且無特殊字元")])]),t._v(" "),a("button",{staticClass:"btn btn-primary",class:{"btn-loading":t.creating},staticStyle:{width:"60px",height:"1%"},attrs:{type:"button",disabled:"",disabled:t.build_disabled},on:{click:t.build}},[t._v("建立")])])]),t._v(" "),t.error.status?a("div",{staticClass:"card-footer"},[a("msg",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.error.message))])],1):t._e()])])])])}),[],!1,null,null,null);e.default=r.exports},v9aq:function(t,e,a){"use strict";var i;a.d(e,"a",(function(){return n}));var s,r,n=a("nFaw").a.div(i||(s=["\n    color: #9A0000;\n"],r||(r=s.slice(0)),i=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(r)}}))))}}]);