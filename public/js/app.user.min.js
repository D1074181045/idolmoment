(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1:function(t,e,s){t.exports=s("8qau")},"8qau":function(t,e,s){"use strict";s.r(e);var o=s("XuX8"),a=s.n(o),r=s("Jc6O"),i=s("jE9Z"),n=s("fgE3"),l=s("L2JU"),c={data:function(){return{username:"",password:"",autologin:!1,password_show:!1,username_disabled:!0,password_disabled:!0,login_disabled:!0,logging:!1}},components:{CardFooter:n.a},computed:Object(l.b)(["error","api_prefix"]),activated:function(){document.title="登入"},methods:{password_toggle_button:function(t){this.password_show=t.target.checked},ban_login:function(){this.username_disabled=this.username.length<=0,this.password_disabled=this.password.length<=0,this.login_disabled=this.username_disabled||this.password_disabled},to_register:function(){this.$router.push({name:"register"})},login_click:function(){var t=this;if(!this.login_disabled){this.logging=!0;var e=this.api_prefix.concat("login");this.$refs.login.focus(),axios.get(e,{params:{username:this.username,password:this.password,autologin:this.autologin}}).then((function(e){e.status?(localStorage.token=e.token,document.location.href="/"):(t.password="",t.password_disabled=!0,t.autologin=!1,t.login_disabled=!0,t.logging=!1,t.$store.commit("show_error",e.message))})).catch((function(e){if(422===e.status){var s="",o=e.data.errors;Object.keys(o).forEach((function(t){s+=o[t]+"\n"})),t.$store.commit("show_error",s)}else t.$store.commit("show_error","發生錯誤: "+e.statusText);t.logging=!1}))}},login_enter:function(){var t=this;document.onkeydown=function(e){13===e.keyCode&&t.login_click()}}}},d=s("KHd+"),u=Object(d.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-8",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login_click(e)}}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v("Login")]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right"},[t._v("使用者名稱")]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.username_disabled),attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.ban_login]}})])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right"},[t._v("使用者密碼")]),t._v(" "),s("div",{staticClass:"col-md-6"},["checkbox"===t.$store.getters.pw_toggle(t.password_show).type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{required:"",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{input:t.ban_login,change:function(e){var s=t.password,o=e.target,a=!!o.checked;if(Array.isArray(s)){var r=t._i(s,null);o.checked?r<0&&(t.password=s.concat([null])):r>-1&&(t.password=s.slice(0,r).concat(s.slice(r+1)))}else t.password=a}}}):"radio"===t.$store.getters.pw_toggle(t.password_show).type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{required:"",autocomplete:"off",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{input:t.ban_login,change:function(e){t.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{required:"",autocomplete:"off",type:t.$store.getters.pw_toggle(t.password_show).type},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.ban_login]}})]),t._v(" "),s("div",{staticClass:"show-hide-toggle-button"},[s("input",{attrs:{type:"checkbox",id:"password-toggle-button"},on:{click:t.password_toggle_button}}),t._v(" "),s("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"password-toggle-button",title:t.$store.getters.pw_toggle(t.password_show).title}},[t._v("Toggle")])])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-6 offset-md-4"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.autologin,expression:"autologin"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.autologin)?t._i(t.autologin,null)>-1:t.autologin},on:{change:function(e){var s=t.autologin,o=e.target,a=!!o.checked;if(Array.isArray(s)){var r=t._i(s,null);o.checked?r<0&&(t.autologin=s.concat([null])):r>-1&&(t.autologin=s.slice(0,r).concat(s.slice(r+1)))}else t.autologin=a}}}),t._v(" "),s("label",{staticClass:"form-check-label"},[t._v("自動登入")])])])]),t._v(" "),s("div",{staticClass:"form-group row mb-0"},[s("div",{staticClass:"col-md-8 offset-md-4"},[s("button",{ref:"login",staticClass:"btn btn-primary",class:{"btn-loading":t.logging},attrs:{type:"button",disabled:"",disabled:t.login_disabled},on:{click:t.login_click}},[t._v("登入\n                    ")]),t._v(" "),s("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:t.to_register}},[t._v("前往註冊")])])])]),t._v(" "),s("CardFooter",{attrs:{error:t.error,type:"alert-danger"}})],1)])}),[],!1,null,null,null).exports,p={data:function(){return{username:"",password:"",password_confirmation:"",password_show:!1,username_disabled:!0,password_disabled:!0,register_disabled:!0,registering:!1}},components:{CardFooter:n.a},computed:Object(l.b)(["error","api_prefix"]),activated:function(){document.title="註冊"},methods:{password_toggle_button:function(t){this.password_show=t.target.checked},between:function(t,e,s){return t>=e&&t<=s},ban_register:function(){this.username_disabled=!this.between(this.username.length,5,15),this.password_disabled=this.password!==this.password_confirmation||!this.between(this.password.length,8,32),this.register_disabled=this.username_disabled||this.password_disabled},back:function(){this.$router.push({name:"login"})},register_click:function(){var t=this;if(!this.register_disabled){this.registering=!0;var e=this.api_prefix.concat("register");this.$refs.register.focus(),axios.post(e,{username:this.username,password:this.password,password_confirmation:this.password_confirmation}).then((function(e){e.status?(t.username="",t.password="",t.password_confirmation="",t.username_disabled=!0,t.password_disabled=!0,t.$router.push({name:"login"})):t.$store.commit("show_error",e.message)})).catch((function(e){if(422===e.status){var s="",o=e.data.errors;Object.keys(o).forEach((function(t){s+=o[t]+"\n"})),t.$store.commit("show_error",s)}else t.$store.commit("show_error","發生錯誤: "+e.statusText)})).finally((function(){t.registering=!1}))}}}},m=Object(d.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-8",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.register_click(e)}}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v("Register")]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right"},[t._v("使用者名稱")]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.username_disabled),attrs:{type:"text",autocomplete:"off",required:"",autofocus:""},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.ban_register]}}),t._v(" "),s("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[t._v("請介於5到15字元之間")])])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right"},[t._v("密碼")]),t._v(" "),s("div",{staticClass:"col-md-6"},["checkbox"===t.$store.getters.pw_toggle(t.password_show).type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{input:t.ban_register,change:function(e){var s=t.password,o=e.target,a=!!o.checked;if(Array.isArray(s)){var r=t._i(s,null);o.checked?r<0&&(t.password=s.concat([null])):r>-1&&(t.password=s.slice(0,r).concat(s.slice(r+1)))}else t.password=a}}}):"radio"===t.$store.getters.pw_toggle(t.password_show).type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{input:t.ban_register,change:function(e){t.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:t.$store.getters.pw_toggle(t.password_show).type},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.ban_register]}}),t._v(" "),s("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[t._v("請介於8到32字元之間")])])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-4 col-form-label text-md-right"},[t._v("確認密碼")]),t._v(" "),s("div",{staticClass:"col-md-6"},["checkbox"===t.$store.getters.pw_toggle(t.password_show).type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.password_confirmation)?t._i(t.password_confirmation,null)>-1:t.password_confirmation},on:{input:t.ban_register,change:function(e){var s=t.password_confirmation,o=e.target,a=!!o.checked;if(Array.isArray(s)){var r=t._i(s,null);o.checked?r<0&&(t.password_confirmation=s.concat([null])):r>-1&&(t.password_confirmation=s.slice(0,r).concat(s.slice(r+1)))}else t.password_confirmation=a}}}):"radio"===t.$store.getters.pw_toggle(t.password_show).type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:t._q(t.password_confirmation,null)},on:{input:t.ban_register,change:function(e){t.password_confirmation=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:t.$store.getters.pw_toggle(t.password_show).type},domProps:{value:t.password_confirmation},on:{input:[function(e){e.target.composing||(t.password_confirmation=e.target.value)},t.ban_register]}})]),t._v(" "),s("div",{staticClass:"show-hide-toggle-button"},[s("input",{attrs:{type:"checkbox",id:"password-toggle-button"},on:{click:t.password_toggle_button}}),t._v(" "),s("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"password-toggle-button",title:t.$store.getters.pw_toggle(t.password_show).title}},[t._v("Toggle")])])]),t._v(" "),s("div",{staticClass:"form-group row mb-0"},[s("div",{staticClass:"col-md-8 offset-md-4"},[s("button",{ref:"register",staticClass:"btn btn-primary",class:{"btn-loading":t.registering},attrs:{id:"register",name:"register",type:"button",disabled:"",disabled:t.register_disabled},on:{click:t.register_click}},[t._v("註冊\n                    ")]),t._v(" "),s("button",{staticClass:"btn btn-dark",attrs:{id:"back",name:"back",type:"button"},on:{click:t.back}},[t._v("返回")])])])]),t._v(" "),s("CardFooter",{attrs:{error:t.error,type:"alert-danger"}})],1)])}),[],!1,null,null,null).exports;a.a.use(i.a);var g=[{path:"/login",component:u,name:"login"},{path:"/register",component:m,name:"register"}],_=new i.a({mode:"history",linkActiveClass:"active",routes:g});try{s("ohdr"),s("Q8j+"),new a.a({el:"#app",store:r.a,router:_}),_.beforeEach((function(t,e,s){r.a.commit("error_clear"),s()}))}catch(t){console.log(t)}},Jc6O:function(t,e,s){"use strict";var o=s("XuX8"),a=s.n(o),r=s("L2JU");a.a.use(r.a);var i=null,n=new r.a.Store({state:{error:{status:0,message:null},ban_type:{signature:{status:!1,time:null},activity:{status:!1,time:null},cooperation:{status:!1,time:null},operating:{status:!1,time:null},chat:{status:!1,time:null}},profile:null,cool_down:null,teetee_info:null,IsCreated:!1,api_prefix:"/api/",prompt_count:0},mutations:{error_clear:function(t){t.error.status=0,t.error.message=null},cool_down:function(t,e){if(t.cool_down[e]){var s=new Date(t.cool_down[e]).getTime()?new Date(t.cool_down[e]).getTime():new Date((r=t.cool_down[e],i=r.split(/[- :]/),new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])))).getTime();if(s>Date.now()){var o=Math.ceil((s-Date.now())/1e3);t.ban_type[e].status=!0,t.ban_type[e].time=o;var a=setInterval((function(){o=Math.ceil((s-Date.now())/1e3),t.ban_type[e].time=o,o<1&&(t.ban_type[e].status=!1,t.ban_type[e].time=null,clearInterval(a))}),1e3)}}var r,i},show_error:function(t,e){t.error.status=!0,t.error.message=e,i&&clearTimeout(i),i=setTimeout((function(){n.commit("error_clear")}),3e3)},load_my_profile:function(t,e){t.IsCreated=e.status,e.status&&(t.cool_down=e.cool_down,t.profile=e.profile,t.teetee_info=e.teetee_info)}},getters:{disabled_class:function(){return function(t){return t?"is-invalid":"is-valid"}},pw_toggle:function(){return function(t){return t?{title:"顯示密碼",type:"text"}:{title:"隱藏密碼",type:"password"}}},NumberFormat:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN";if(null==t)return null;switch(e){case"zh-TW":return new Intl.NumberFormat(e,{notation:"compact",compactDisplay:"long"}).format(t);default:return(new Intl.NumberFormat).format(t)}}}},actions:{load_my_profile:function(t){var e=t.commit,s=this.state.api_prefix.concat("my-profile");return new Promise((function(t,o){axios.get(s).then((function(s){e("load_my_profile",s),t()})).catch((function(){o()}))}))}}});e.a=n},"Q8j+":function(t,e,s){"use strict";s.r(e);var o=s("vDqi"),a=s.n(o);window.axios=a.a.create(),window.axios.interceptors.response.use((function(t){var e=t.headers.authorization;return e&&(localStorage.token=e.substr(7),window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token)),t.data}),(function(t){switch(t.response.status){case 401:document.location.href="/logout",localStorage.removeItem("token")}return Promise.reject(t.response)}))},fgE3:function(t,e,s){"use strict";var o={props:["type","error"],components:{msg:s("v9aq").a}},a=s("KHd+"),r=Object(a.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return this.error.status?e("div",{staticClass:"card-footer",class:this.type},[e("msg",{staticStyle:{"text-align":"center"}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"}}),this._v(" "),e("path",{attrs:{d:"M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"}})]),this._v("\n        "+this._s(this.error.message)+"\n    ")])],1):this._e()}),[],!1,null,null,null);e.a=r.exports},ohdr:function(t,e,s){try{s("SYky")}catch(t){}},v9aq:function(t,e,s){"use strict";var o;s.d(e,"a",(function(){return i}));var a,r,i=s("nFaw").a.div(o||(a=["\n    color: #9A0000;\n"],r||(r=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))}},[[1,0,1]]]);