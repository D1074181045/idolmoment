(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1:function(e,s,t){e.exports=t("EkFx")},"7Lkh":function(e,s,t){"use strict";t.r(s);var o=t("vDqi"),a=t.n(o);window.axios=a.a.create(),window.axios.interceptors.response.use((function(e){var s=e.headers.authorization;return s&&(localStorage.token=s.substr(7),window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token)),e.data}),(function(e){switch(e.response.status){case 401:document.location.href="/logout"}return Promise.reject(e.response)}))},"9Wh1":function(e,s,t){try{window.$=window.jQuery=t("EVdn"),t("4yks"),t("SYky")}catch(e){}},EkFx:function(e,s,t){"use strict";t.r(s);var o=t("XuX8"),a=t.n(o),r=t("Jc6O"),i=t("jE9Z"),n=t("v9aq"),l={data:function(){return{username:"",password:"",autologin:!1,pw_is_show:!1,username_disabled:!0,password_disabled:!0,login_disabled:!0}},components:{msg:n.a},computed:{error:function(){return this.$store.state.error}},methods:{pw_class:function(){return this.pw_is_show?"show-pw":"hide-pw"},pw_title:function(){return this.pw_is_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.pw_is_show?"text":"password"},password_toggle_button:function(){this.pw_is_show=!this.pw_is_show},ban_login:function(){this.username_disabled=this.username.length<=0,this.password_disabled=this.password.length<=0,this.login_disabled=this.username_disabled||this.password_disabled},to_register:function(){this.$router.push({name:"register"})},login_click:function(){var e=this;this.login_disabled||(this.$refs.login.focus(),axios.get(this.api_prefix.concat("login"),{params:{username:this.username,password:this.password,autologin:this.autologin}}).then((function(s){var t=s.status,o=s.message,a=s.token;t?(localStorage.token=a,document.location.href="/"):(e.password="",e.password_disabled=!0,e.autologin=!1,e.login_disabled=!0,e.$store.commit("show_error",o))})).catch((function(s){if(422===s.status){var t="",o=s.data.errors;Object.keys(o).forEach((function(e){t+=o[e]+"\n"})),e.$store.commit("show_error",t)}else e.$store.commit("show_error","發生錯誤: "+s.statusText)})))},login_enter:function(){var e=this;document.onkeydown=function(s){console.log(s),13===s.keyCode&&e.login_click()}}}},c=t("KHd+"),d=Object(c.a)(l,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"col-md-8",on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.login_click(s)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[e._v("Login")]),e._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[e._v("使用者名稱")]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.username_disabled),attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:e.username},on:{input:[function(s){s.target.composing||(e.username=s.target.value)},e.ban_login]}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[e._v("使用者密碼")]),e._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===e.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{required:"",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{input:e.ban_login,change:function(s){var t=e.password,o=s.target,a=!!o.checked;if(Array.isArray(t)){var r=e._i(t,null);o.checked?r<0&&(e.password=t.concat([null])):r>-1&&(e.password=t.slice(0,r).concat(t.slice(r+1)))}else e.password=a}}}):"radio"===e.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{required:"",autocomplete:"off",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{input:e.ban_login,change:function(s){e.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{required:"",autocomplete:"off",type:e.pw_type()},domProps:{value:e.password},on:{input:[function(s){s.target.composing||(e.password=s.target.value)},e.ban_login]}})]),e._v(" "),t("button",{staticClass:"show-hide-toggle-button",class:e.pw_class(),attrs:{type:"button",title:"顯示密碼",tabindex:"-1",title:e.pw_title()},on:{click:e.password_toggle_button}})]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-6 offset-md-4"},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.autologin,expression:"autologin"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.autologin)?e._i(e.autologin,null)>-1:e.autologin},on:{change:function(s){var t=e.autologin,o=s.target,a=!!o.checked;if(Array.isArray(t)){var r=e._i(t,null);o.checked?r<0&&(e.autologin=t.concat([null])):r>-1&&(e.autologin=t.slice(0,r).concat(t.slice(r+1)))}else e.autologin=a}}}),e._v(" "),t("label",{staticClass:"form-check-label"},[e._v("自動登入")])])])]),e._v(" "),t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{ref:"login",staticClass:"btn btn-primary",attrs:{type:"button",disabled:"",disabled:e.login_disabled},on:{click:e.login_click}},[e._v("登入")]),e._v(" "),t("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:e.to_register}},[e._v("前往註冊")])])])]),e._v(" "),e.error.status?t("div",{staticClass:"card-footer"},[t("msg",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.error.message))])],1):e._e()])])}),[],!1,null,null,null).exports,u={data:function(){return{username:"",password:"",password_confirm:"",pw_is_show:!1,username_disabled:!0,password_disabled:!0,register_disabled:!0}},components:{msg:n.a},computed:{error:function(){return this.$store.state.error}},methods:{pw_class:function(){return this.pw_is_show?"show-pw":"hide-pw"},pw_title:function(){return this.pw_is_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.pw_is_show?"text":"password"},password_toggle_button:function(){this.pw_is_show=!this.pw_is_show},between:function(e,s,t){return e>=s&&e<=t},ban_register:function(){var e=new RegExp("^[0-9A-Za-z]+$"),s=0;this.username.match(e)&&this.between(this.username.length,5,15)?(this.username_disabled=!1,s+=1):this.username_disabled=!0,this.password===this.password_confirm&&this.password.match(e)&&this.between(this.password.length,8,32)?(this.password_disabled=!1,s+=1):this.password_disabled=!0,this.register_disabled=2!==s},back:function(){this.$router.push({name:"login"})},register_click:function(){var e=this;this.register_disabled||(this.$refs.register.focus(),axios.post(this.api_prefix.concat("register"),{username:this.username,password:this.password,password_confirm:this.password_confirm}).then((function(s){var t=s.status,o=s.message;t?(e.username="",e.password="",e.password_confirm="",e.username_disabled=!0,e.password_disabled=!0,e.$router.push({name:"login"})):e.$store.commit("show_error",o)})).catch((function(s){if(422===s.status){var t="",o=s.data.errors;Object.keys(o).forEach((function(e){t+=o[e]+"\n"})),e.$store.commit("show_error",t)}else e.$store.commit("show_error","發生錯誤: "+s.statusText)})))}}},p=Object(c.a)(u,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"col-md-8",on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.register_click(s)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[e._v("Register")]),e._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[e._v("使用者名稱")]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.username_disabled),attrs:{type:"text",autocomplete:"off",required:"",autofocus:""},domProps:{value:e.username},on:{input:[function(s){s.target.composing||(e.username=s.target.value)},e.ban_register]}}),e._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[e._v("請介於5到15字元之間，且無特殊字元")])])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[e._v("密碼")]),e._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===e.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{input:e.ban_register,change:function(s){var t=e.password,o=s.target,a=!!o.checked;if(Array.isArray(t)){var r=e._i(t,null);o.checked?r<0&&(e.password=t.concat([null])):r>-1&&(e.password=t.slice(0,r).concat(t.slice(r+1)))}else e.password=a}}}):"radio"===e.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{input:e.ban_register,change:function(s){e.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:e.pw_type()},domProps:{value:e.password},on:{input:[function(s){s.target.composing||(e.password=s.target.value)},e.ban_register]}}),e._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[e._v("請介於8到32字元之間，且無特殊字元")])])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[e._v("確認密碼")]),e._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===e.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.password_confirm)?e._i(e.password_confirm,null)>-1:e.password_confirm},on:{input:e.ban_register,change:function(s){var t=e.password_confirm,o=s.target,a=!!o.checked;if(Array.isArray(t)){var r=e._i(t,null);o.checked?r<0&&(e.password_confirm=t.concat([null])):r>-1&&(e.password_confirm=t.slice(0,r).concat(t.slice(r+1)))}else e.password_confirm=a}}}):"radio"===e.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:e._q(e.password_confirm,null)},on:{input:e.ban_register,change:function(s){e.password_confirm=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:e.$store.getters.disabled_class(e.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:e.pw_type()},domProps:{value:e.password_confirm},on:{input:[function(s){s.target.composing||(e.password_confirm=s.target.value)},e.ban_register]}})]),e._v(" "),t("button",{staticClass:"show-hide-toggle-button",class:e.pw_class(),attrs:{type:"button",tabindex:"-1",title:e.pw_title()},on:{click:e.password_toggle_button}})]),e._v(" "),t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{ref:"register",staticClass:"btn btn-primary",attrs:{id:"register",name:"register",type:"button",disabled:"",disabled:e.register_disabled},on:{click:e.register_click}},[e._v("註冊")]),e._v(" "),t("button",{staticClass:"btn btn-dark",attrs:{id:"back",name:"back",type:"button"},on:{click:e.back}},[e._v("返回")])])])]),e._v(" "),e.error.status?t("div",{staticClass:"card-footer"},[t("msg",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.error.message))])],1):e._e()])])}),[],!1,null,null,null).exports;a.a.use(i.a);var m=[{path:"/login",component:d,name:"login",meta:{KeepAlive:!0}},{path:"/register",component:p,name:"register",meta:{KeepAlive:!0}}],_=new i.a({mode:"history",linkActiveClass:"active",routes:m});function w(e,s){for(var t=0;t<s.length;t++){var o=s[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=function(){function e(){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e)}var s,t,o;return s=e,o=[{key:"variables",value:function(){a.a.prototype.api_prefix="/api/"}},{key:"methods",value:function(){}}],(t=null)&&w(s.prototype,t),o&&w(s,o),e}();try{t("9Wh1"),t("7Lkh"),f.variables(),new a.a({el:"#app",store:r.a,router:_})}catch(e){console.log(e)}},Jc6O:function(e,s,t){"use strict";var o=t("XuX8"),a=t.n(o),r=t("L2JU");a.a.use(r.a);var i=new r.a.Store({state:{error:{status:0,message:null},ban_type:{signature:{status:!1,time:null},activity:{status:!1,time:null},operating:{status:!1,time:null},chat:{status:!1,time:null}},profile:null,cool_down:null,teetee_info:null,IsCreated:!1},mutations:{cool_down:function(e,s){if(e.cool_down[s]){var t=new Date(e.cool_down[s]).getTime()?new Date(e.cool_down[s]).getTime():new Date((r=e.cool_down[s],i=r.split(/[- :]/),new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])))).getTime();if(t>Date.now()){var o=Math.ceil((t-Date.now())/1e3);e.ban_type[s].status=!0,e.ban_type[s].time=o;var a=setInterval((function(){o=Math.ceil((t-Date.now())/1e3),e.ban_type[s].time=o,o<1&&(e.ban_type[s].status=!1,e.ban_type[s].time=null,clearInterval(a))}),1e3)}}var r,i},show_error:function(e,s){e.error.status=!0,e.error.message=s,setTimeout((function(){e.error.status=0,e.error.message=null}),3e3)},load_my_profile:function(e,s){e.IsCreated=s.status,s.status&&(e.cool_down=s.cool_down,e.profile=s.profile,e.teetee_info=s.teetee_info)}},getters:{disabled_class:function(){return function(e){return e?"is-invalid":"is-valid"}},NumberFormat:function(){return function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN";switch(s){case"zh-TW":return new Intl.NumberFormat(s,{notation:"compact",compactDisplay:"long"}).format(e);default:return(new Intl.NumberFormat).format(e)}}}},actions:{load_my_profile:function(e){var s=e.commit;return new Promise((function(e,t){window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token),axios.get(a.a.prototype.api_prefix.concat("my-profile")).then((function(t){s("load_my_profile",t),e()})).catch((function(){t()}))}))}}});s.a=i},v9aq:function(e,s,t){"use strict";var o;t.d(s,"a",(function(){return i}));var a,r,i=t("nFaw").a.div(o||(a=["\n    color: #9A0000;\n    font-size:20px;\n"],r||(r=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))}},[[1,1,0]]]);