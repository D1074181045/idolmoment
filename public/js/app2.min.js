(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1:function(s,e,t){s.exports=t("EkFx")},"7Lkh":function(s,e,t){"use strict";t.r(e);var o=t("vDqi"),a=t.n(o);window.axios=a.a.create(),window.axios.interceptors.response.use((function(s){var e=s.headers.authorization;return e&&(localStorage.token=e.substr(7),window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token)),s.data}),(function(s){switch(s.response.status){case 401:document.location.href="/logout"}return Promise.reject(s.response)}))},"9Wh1":function(s,e,t){try{window.$=window.jQuery=t("EVdn"),t("4yks"),t("SYky")}catch(s){}},EkFx:function(s,e,t){"use strict";t.r(e);var o=t("XuX8"),a=t.n(o),r=t("Jc6O"),i=t("jE9Z"),n=t("v9aq"),l={data:function(){return{username:"",password:"",autologin:!1,pw_is_show:!1,username_disabled:!0,password_disabled:!0,login_disabled:!0}},components:{msg:n.a},computed:{error:function(){return this.$store.state.error}},methods:{pw_class:function(){return this.pw_is_show?"show-pw":"hide-pw"},pw_title:function(){return this.pw_is_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.pw_is_show?"text":"password"},password_toggle_button:function(){this.pw_is_show=!this.pw_is_show},ban_login:function(){this.username_disabled=this.username.length<=0,this.password_disabled=this.password.length<=0,this.login_disabled=this.username_disabled||this.password_disabled},to_register:function(){this.$router.push({name:"register"})},login_click:function(){var s=this;this.login_disabled||(this.$refs.login.focus(),axios.get(this.api_prefix.concat("login"),{params:{username:this.username,password:this.password,autologin:this.autologin}}).then((function(e){var t=e.status,o=e.message,a=e.token;t?(localStorage.token=a,document.location.href="/"):(s.password="",s.password_disabled=!0,s.autologin=!1,s.login_disabled=!0,s.$store.commit("show_error",o))})).catch((function(e){if(422===e.status){var t="",o=e.data.errors;Object.keys(o).forEach((function(s){t+=o[s]+"\n"})),s.$store.commit("show_error",t)}else s.$store.commit("show_error","發生錯誤: "+e.statusText)})))},login_enter:function(){var s=this;document.onkeydown=function(e){console.log(e),13===e.keyCode&&s.login_click()}}}},c=t("KHd+"),d=Object(c.a)(l,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"col-md-8",on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.login_click(e)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[s._v("Login")]),s._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者名稱")]),s._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.username_disabled),attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:s.username},on:{input:[function(e){e.target.composing||(s.username=e.target.value)},s.ban_login]}})])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者密碼")]),s._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{input:s.ban_login,change:function(e){var t=s.password,o=e.target,a=!!o.checked;if(Array.isArray(t)){var r=s._i(t,null);o.checked?r<0&&(s.password=t.concat([null])):r>-1&&(s.password=t.slice(0,r).concat(t.slice(r+1)))}else s.password=a}}}):"radio"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{input:s.ban_login,change:function(e){s.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:s.pw_type()},domProps:{value:s.password},on:{input:[function(e){e.target.composing||(s.password=e.target.value)},s.ban_login]}})]),s._v(" "),t("button",{staticClass:"show-hide-toggle-button",class:s.pw_class(),attrs:{type:"button",title:"顯示密碼",tabindex:"-1",title:s.pw_title()},on:{click:s.password_toggle_button}})]),s._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-6 offset-md-4"},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.autologin,expression:"autologin"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.autologin)?s._i(s.autologin,null)>-1:s.autologin},on:{change:function(e){var t=s.autologin,o=e.target,a=!!o.checked;if(Array.isArray(t)){var r=s._i(t,null);o.checked?r<0&&(s.autologin=t.concat([null])):r>-1&&(s.autologin=t.slice(0,r).concat(t.slice(r+1)))}else s.autologin=a}}}),s._v(" "),t("label",{staticClass:"form-check-label"},[s._v("自動登入")])])])]),s._v(" "),t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{ref:"login",staticClass:"btn btn-primary",attrs:{type:"button",disabled:"",disabled:s.login_disabled},on:{click:s.login_click}},[s._v("登入")]),s._v(" "),t("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:s.to_register}},[s._v("前往註冊")])])])]),s._v(" "),s.error.status?t("div",{staticClass:"card-footer"},[t("msg",{staticStyle:{"text-align":"center"}},[s._v(s._s(s.error.message))])],1):s._e()])])}),[],!1,null,null,null).exports,u={data:function(){return{username:"",password:"",password_confirm:"",pw_is_show:!1,username_disabled:!0,password_disabled:!0,register_disabled:!0}},components:{msg:n.a},computed:{error:function(){return this.$store.state.error}},methods:{pw_class:function(){return this.pw_is_show?"show-pw":"hide-pw"},pw_title:function(){return this.pw_is_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.pw_is_show?"text":"password"},password_toggle_button:function(){this.pw_is_show=!this.pw_is_show},between:function(s,e,t){return s>=e&&s<=t},ban_register:function(){var s=new RegExp("^[0-9A-Za-z]+$"),e=0;this.username.match(s)&&this.between(this.username.length,5,15)?(this.username_disabled=!1,e+=1):this.username_disabled=!0,this.password===this.password_confirm&&this.password.match(s)&&this.between(this.password.length,8,32)?(this.password_disabled=!1,e+=1):this.password_disabled=!0,this.register_disabled=2!==e},back:function(){this.$router.push({name:"login"})},register_click:function(){var s=this;this.register_disabled||(this.$refs.register.focus(),axios.post(this.api_prefix.concat("register"),{username:this.username,password:this.password,password_confirm:this.password_confirm}).then((function(e){var t=e.status,o=e.message;t?(s.username="",s.password="",s.password_confirm="",s.username_disabled=!0,s.password_disabled=!0,s.$router.push({name:"login"})):s.$store.commit("show_error",o)})).catch((function(e){if(422===e.status){var t="",o=e.data.errors;Object.keys(o).forEach((function(s){t+=o[s]+"\n"})),s.$store.commit("show_error",t)}else s.$store.commit("show_error","發生錯誤: "+e.statusText)})))}}},p=Object(c.a)(u,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"col-md-8",on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.register_click(e)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[s._v("Register")]),s._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者名稱")]),s._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.username_disabled),attrs:{type:"text",autocomplete:"off",required:"",autofocus:""},domProps:{value:s.username},on:{input:[function(e){e.target.composing||(s.username=e.target.value)},s.ban_register]}}),s._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[s._v("請介於5到15字元之間，且無特殊字元")])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("密碼")]),s._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{input:s.ban_register,change:function(e){var t=s.password,o=e.target,a=!!o.checked;if(Array.isArray(t)){var r=s._i(t,null);o.checked?r<0&&(s.password=t.concat([null])):r>-1&&(s.password=t.slice(0,r).concat(t.slice(r+1)))}else s.password=a}}}):"radio"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{input:s.ban_register,change:function(e){s.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:s.pw_type()},domProps:{value:s.password},on:{input:[function(e){e.target.composing||(s.password=e.target.value)},s.ban_register]}}),s._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[s._v("請介於8到32字元之間，且無特殊字元")])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("確認密碼")]),s._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(s.password_confirm)?s._i(s.password_confirm,null)>-1:s.password_confirm},on:{input:s.ban_register,change:function(e){var t=s.password_confirm,o=e.target,a=!!o.checked;if(Array.isArray(t)){var r=s._i(t,null);o.checked?r<0&&(s.password_confirm=t.concat([null])):r>-1&&(s.password_confirm=t.slice(0,r).concat(t.slice(r+1)))}else s.password_confirm=a}}}):"radio"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:s._q(s.password_confirm,null)},on:{input:s.ban_register,change:function(e){s.password_confirm=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:s.pw_type()},domProps:{value:s.password_confirm},on:{input:[function(e){e.target.composing||(s.password_confirm=e.target.value)},s.ban_register]}})]),s._v(" "),t("button",{staticClass:"show-hide-toggle-button",class:s.pw_class(),attrs:{type:"button",tabindex:"-1",title:s.pw_title()},on:{click:s.password_toggle_button}})]),s._v(" "),t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{ref:"register",staticClass:"btn btn-primary",attrs:{id:"register",name:"register",type:"button",disabled:"",disabled:s.register_disabled},on:{click:s.register_click}},[s._v("註冊")]),s._v(" "),t("button",{staticClass:"btn btn-dark",attrs:{id:"back",name:"back",type:"button"},on:{click:s.back}},[s._v("返回")])])])]),s._v(" "),s.error.status?t("div",{staticClass:"card-footer"},[t("msg",{staticStyle:{"text-align":"center"}},[s._v(s._s(s.error.message))])],1):s._e()])])}),[],!1,null,null,null).exports;a.a.use(i.a);var m=[{path:"/login",component:d,name:"login",meta:{KeepAlive:!0}},{path:"/register",component:p,name:"register",meta:{KeepAlive:!0}}],_=new i.a({mode:"history",linkActiveClass:"active",routes:m});function w(s,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}var f=function(){function s(){!function(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s)}var e,t,o;return e=s,o=[{key:"variables",value:function(){a.a.prototype.api_prefix="/api/"}},{key:"methods",value:function(){}}],(t=null)&&w(e.prototype,t),o&&w(e,o),s}();try{t("9Wh1"),t("7Lkh"),f.variables(),new a.a({el:"#app",store:r.a,router:_})}catch(s){console.log(s)}},Jc6O:function(s,e,t){"use strict";var o=t("XuX8"),a=t.n(o),r=t("L2JU");a.a.use(r.a);var i=new r.a.Store({state:{error:{status:0,message:null},ban_type:{signature:{status:!1,time:null},activity:{status:!1,time:null},operating:{status:!1,time:null},chat:{status:!1,time:null}},profile:null,cool_down:null,teetee_info:null,IsCreated:!1},mutations:{cool_down:function(s,e){var t=new Date(s.cool_down[e]).getTime();if(t>Date.now()){var o=Math.ceil((t-Date.now())/1e3);s.ban_type[e].status=!0,s.ban_type[e].time=o;var a=setInterval((function(){o=Math.ceil((t-Date.now())/1e3),s.ban_type[e].time=o,o<1&&(s.ban_type[e].status=!1,s.ban_type[e].time=null,clearInterval(a))}),1e3)}},show_error:function(s,e){s.error.status=!0,s.error.message=e,setTimeout((function(){s.error.status=0,s.error.message=null}),3e3)},load_my_profile:function(s,e){s.IsCreated=e.status,e.status&&(s.cool_down=e.cool_down,s.profile=e.profile,s.teetee_info=e.teetee_info)}},getters:{disabled_class:function(){return function(s){return s?"is-invalid":"is-valid"}},NumberFormat:function(){return function(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN";switch(e){case"zh-TW":return new Intl.NumberFormat(e,{notation:"compact",compactDisplay:"long"}).format(s);default:return new Intl.NumberFormat(e).format(s)}}}},actions:{load_my_profile:function(s){var e=s.commit;return new Promise((function(s,t){window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token),axios.get(a.a.prototype.api_prefix.concat("my-profile")).then((function(t){e("load_my_profile",t),s()})).catch((function(){t()}))}))}}});e.a=i},v9aq:function(s,e,t){"use strict";var o;t.d(e,"a",(function(){return i}));var a,r,i=t("nFaw").a.div(o||(a=["\n    color: #9A0000;\n    font-size:20px;\n"],r||(r=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))}},[[1,1,0]]]);