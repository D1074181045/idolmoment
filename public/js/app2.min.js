(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1:function(s,e,t){s.exports=t("EkFx")},"7Lkh":function(s,e,t){"use strict";t.r(e);var a=t("vDqi"),o=t.n(a);window.axios=o.a.create(),window.axios.interceptors.response.use((function(s){var e=s.headers.authorization;return e&&(localStorage.token=e.substr(7),window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token)),s.data}),(function(s){return Promise.reject(s.response)}))},"9Wh1":function(s,e,t){try{window.$=window.jQuery=t("EVdn"),t("4yks"),t("SYky")}catch(s){}},EkFx:function(s,e,t){"use strict";t.r(e);var a,o=t("XuX8"),r=t.n(o),i=t("jE9Z");var n,l,c=t("nFaw").a.div(a||(n=["\n    color: #9A0000;\n    text-align: center;\n    font-size:20px;\n"],l||(l=n.slice(0)),a=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(l)}})))),d={data:function(){return{error:{status:0,message:null},username:"",password:"",autologin:!1,pw_is_show:!1,username_disabled:!0,password_disabled:!0,login_disabled:!0}},components:{msg:c},methods:{disabled_class:function(s){return s?"is-invalid":"is-valid"},pw_class:function(){return this.pw_is_show?"show-pw":"hide-pw"},pw_title:function(){return this.pw_is_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.pw_is_show?"text":"password"},password_toggle_button:function(){this.pw_is_show=!this.pw_is_show},ban_login:function(){this.username_disabled=this.username.length<=0,this.password_disabled=this.password.length<=0,this.login_disabled=this.username_disabled||this.password_disabled},show_error:function(s){var e=this;this.error.status=!0,this.error.message=s,setTimeout((function(){e.error.status=0,e.error.message=null}),3e3)},to_register:function(){this.$router.push({name:"register"})},login_click:function(){var s=this;this.login_disabled||(this.$refs.login.focus(),axios.get(this.api_prefix.concat("login"),{params:{username:this.username,password:this.password,autologin:this.autologin}}).then((function(e){var t=e.status,a=e.message,o=e.token;t?(localStorage.token=o,document.location.href="/"):(s.password="",s.password_disabled=!0,s.autologin=!1,s.show_error(a))})).catch((function(e){if(422===e.status){var t="",a=e.data.errors;Object.keys(a).forEach((function(s){t+=a[s]+"\n"})),s.show_error(t)}else s.show_error("發生錯誤: "+e.statusText)})))},login_enter:function(){var s=this;document.onkeydown=function(e){console.log(e),13===e.keyCode&&s.login_click()}}}},u=t("KHd+"),p=Object(u.a)(d,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"col-md-8",on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.login_click(e)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[s._v("Login")]),s._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者名稱")]),s._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-control",class:s.disabled_class(s.username_disabled),attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:s.username},on:{input:[function(e){e.target.composing||(s.username=e.target.value)},s.ban_login]}})])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者密碼")]),s._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{input:s.ban_login,change:function(e){var t=s.password,a=e.target,o=!!a.checked;if(Array.isArray(t)){var r=s._i(t,null);a.checked?r<0&&(s.password=t.concat([null])):r>-1&&(s.password=t.slice(0,r).concat(t.slice(r+1)))}else s.password=o}}}):"radio"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{input:s.ban_login,change:function(e){s.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{required:"",autocomplete:"off",type:s.pw_type()},domProps:{value:s.password},on:{input:[function(e){e.target.composing||(s.password=e.target.value)},s.ban_login]}})]),s._v(" "),t("button",{staticClass:"show-hide-toggle-button",class:s.pw_class(),attrs:{type:"button",title:"顯示密碼",tabindex:"-1",title:s.pw_title()},on:{click:s.password_toggle_button}})]),s._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-6 offset-md-4"},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.autologin,expression:"autologin"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.autologin)?s._i(s.autologin,null)>-1:s.autologin},on:{change:function(e){var t=s.autologin,a=e.target,o=!!a.checked;if(Array.isArray(t)){var r=s._i(t,null);a.checked?r<0&&(s.autologin=t.concat([null])):r>-1&&(s.autologin=t.slice(0,r).concat(t.slice(r+1)))}else s.autologin=o}}}),s._v(" "),t("label",{staticClass:"form-check-label"},[s._v("自動登入")])])])]),s._v(" "),t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{ref:"login",staticClass:"btn btn-primary",attrs:{type:"button",disabled:"",disabled:s.login_disabled},on:{click:s.login_click}},[s._v("登入")]),s._v(" "),t("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:s.to_register}},[s._v("前往註冊")])])])]),s._v(" "),s.error.status?t("div",{staticClass:"card-footer"},[t("msg",[s._v(s._s(s.error.message))])],1):s._e()])])}),[],!1,null,null,null).exports,m={data:function(){return{error:{status:0,message:null},username:"",password:"",password_confirm:"",pw_is_show:!1,username_disabled:!0,password_disabled:!0,register_disabled:!0}},components:{msg:c},methods:{disabled_class:function(s){return s?"is-invalid":"is-valid"},pw_class:function(){return this.pw_is_show?"show-pw":"hide-pw"},pw_title:function(){return this.pw_is_show?"顯示密碼":"隱藏密碼"},pw_type:function(){return this.pw_is_show?"text":"password"},password_toggle_button:function(){this.pw_is_show=!this.pw_is_show},between:function(s,e,t){return s>=e&&s<=t},ban_register:function(){var s=new RegExp("^[0-9A-Za-z]+$"),e=0;this.username.match(s)&&this.between(this.username.length,5,15)?(this.username_disabled=!1,e+=1):this.username_disabled=!0,this.password===this.password_confirm&&this.password.match(s)&&this.between(this.password.length,8,32)?(this.password_disabled=!1,e+=1):this.password_disabled=!0,this.register_disabled=2!==e},show_error:function(s){var e=this;this.error.status=!0,this.error.message=s,setTimeout((function(){e.error.status=0,e.error.message=null}),3e3)},back:function(){this.$router.push({name:"login"})},register_click:function(){var s=this;this.register_disabled||(this.$refs.register.focus(),axios.post(this.api_prefix.concat("register"),{username:this.username,password:this.password,password_confirm:this.password_confirm}).then((function(e){var t=e.status,a=e.message;t?(s.username="",s.password="",s.password_confirm="",s.username_disabled=!0,s.password_disabled=!0,s.$router.push({name:"login"})):s.show_error(a)})).catch((function(e){if(422===e.status){var t="",a=e.data.errors;Object.keys(a).forEach((function(s){t+=a[s]+"\n"})),s.show_error(t)}else s.show_error("發生錯誤: "+e.statusText)})))}}},_=Object(u.a)(m,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"col-md-8",on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.register_click(e)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[s._v("Register")]),s._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("使用者名稱")]),s._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-control",class:s.disabled_class(s.username_disabled),attrs:{type:"text",autocomplete:"off",required:"",autofocus:""},domProps:{value:s.username},on:{input:[function(e){e.target.composing||(s.username=e.target.value)},s.ban_register]}}),s._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[s._v("請介於5到15字元之間，且無特殊字元")])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("密碼")]),s._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{input:s.ban_register,change:function(e){var t=s.password,a=e.target,o=!!a.checked;if(Array.isArray(t)){var r=s._i(t,null);a.checked?r<0&&(s.password=t.concat([null])):r>-1&&(s.password=t.slice(0,r).concat(t.slice(r+1)))}else s.password=o}}}):"radio"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{input:s.ban_register,change:function(e){s.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:s.pw_type()},domProps:{value:s.password},on:{input:[function(e){e.target.composing||(s.password=e.target.value)},s.ban_register]}}),s._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[s._v("請介於8到32字元之間，且無特殊字元")])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-4 col-form-label text-md-right"},[s._v("確認密碼")]),s._v(" "),t("div",{staticClass:"col-md-6"},["checkbox"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"checkbox"},domProps:{checked:Array.isArray(s.password_confirm)?s._i(s.password_confirm,null)>-1:s.password_confirm},on:{input:s.ban_register,change:function(e){var t=s.password_confirm,a=e.target,o=!!a.checked;if(Array.isArray(t)){var r=s._i(t,null);a.checked?r<0&&(s.password_confirm=t.concat([null])):r>-1&&(s.password_confirm=t.slice(0,r).concat(t.slice(r+1)))}else s.password_confirm=o}}}):"radio"===s.pw_type()?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:"radio"},domProps:{checked:s._q(s.password_confirm,null)},on:{input:s.ban_register,change:function(e){s.password_confirm=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password_confirm,expression:"password_confirm"}],staticClass:"form-control",class:s.disabled_class(s.password_disabled),attrs:{type:"password",autocomplete:"off",required:"",type:s.pw_type()},domProps:{value:s.password_confirm},on:{input:[function(e){e.target.composing||(s.password_confirm=e.target.value)},s.ban_register]}})]),s._v(" "),t("button",{staticClass:"show-hide-toggle-button",class:s.pw_class(),attrs:{type:"button",tabindex:"-1",title:s.pw_title()},on:{click:s.password_toggle_button}})]),s._v(" "),t("div",{staticClass:"form-group row mb-0"},[t("div",{staticClass:"col-md-8 offset-md-4"},[t("button",{ref:"register",staticClass:"btn btn-primary",attrs:{id:"register",name:"register",type:"button",disabled:"",disabled:s.register_disabled},on:{click:s.register_click}},[s._v("註冊")]),s._v(" "),t("button",{staticClass:"btn btn-dark",attrs:{id:"back",name:"back",type:"button"},on:{click:s.back}},[s._v("返回")])])])]),s._v(" "),s.error.status?t("div",{staticClass:"card-footer"},[t("msg",[s._v(s._s(s.error.message))])],1):s._e()])])}),[],!1,null,null,null).exports;r.a.use(i.a);var w=[{path:"/login",component:p,name:"login",meta:{KeepAlive:!0}},{path:"/register",component:_,name:"register",meta:{KeepAlive:!0}}],f=new i.a({mode:"history",linkActiveClass:"active",routes:w});function h(s,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}var v=function(){function s(){!function(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s)}var e,t,a;return e=s,a=[{key:"variables",value:function(){r.a.prototype.api_prefix="/api/"}},{key:"methods",value:function(){}}],(t=null)&&h(e.prototype,t),a&&h(e,a),s}();try{t("9Wh1"),t("7Lkh"),v.variables(),new r.a({el:"#app",router:f})}catch(s){console.log(s)}}},[[1,0,1]]]);