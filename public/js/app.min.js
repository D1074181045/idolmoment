(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(e,t,n){e.exports=n("bUC5")},"7Lkh":function(e,t,n){"use strict";n.r(t);var o=n("vDqi"),a=n.n(o);window.axios=a.a.create(),window.axios.interceptors.response.use((function(e){var t=e.headers.authorization;return t&&(localStorage.token=t.substr(7),window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token)),e.data}),(function(e){switch(e.response.status){case 401:document.location.href="/logout",localStorage.removeItem("token")}return Promise.reject(e.response)}))},"9Wh1":function(e,t,n){try{n("SYky")}catch(e){}},Jc6O:function(e,t,n){"use strict";var o=n("XuX8"),a=n.n(o),r=n("L2JU");a.a.use(r.a);var i=new r.a.Store({state:{error:{status:0,message:null},ban_type:{signature:{status:!1,time:null},activity:{status:!1,time:null},operating:{status:!1,time:null},chat:{status:!1,time:null}},profile:null,cool_down:null,teetee_info:null,IsCreated:!1,api_prefix:"/api/"},mutations:{cool_down:function(e,t){if(e.cool_down[t]){var n=new Date(e.cool_down[t]).getTime()?new Date(e.cool_down[t]).getTime():new Date((r=e.cool_down[t],i=r.split(/[- :]/),new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])))).getTime();if(n>Date.now()){var o=Math.ceil((n-Date.now())/1e3);e.ban_type[t].status=!0,e.ban_type[t].time=o;var a=setInterval((function(){o=Math.ceil((n-Date.now())/1e3),e.ban_type[t].time=o,o<1&&(e.ban_type[t].status=!1,e.ban_type[t].time=null,clearInterval(a))}),1e3)}}var r,i},show_error:function(e,t){e.error.status=!0,e.error.message=t,setTimeout((function(){e.error.status=0,e.error.message=null}),3e3)},load_my_profile:function(e,t){e.IsCreated=t.status,t.status&&(e.cool_down=t.cool_down,e.profile=t.profile,e.teetee_info=t.teetee_info)}},getters:{disabled_class:function(){return function(e){return e?"is-invalid":"is-valid"}},NumberFormat:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN";if(!e)return null;switch(t){case"zh-TW":return new Intl.NumberFormat(t,{notation:"compact",compactDisplay:"long"}).format(e);default:return(new Intl.NumberFormat).format(e)}}}},actions:{load_my_profile:function(e){var t=e.commit,n=this.state.api_prefix.concat("my-profile");return new Promise((function(e,o){window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token),axios.get(n).then((function(n){t("load_my_profile",n),e()})).catch((function(){o()}))}))}}});t.a=i},bUC5:function(e,t,n){"use strict";n.r(t);var o=n("XuX8"),a=n.n(o),r=n("Jc6O"),i=n("jE9Z");a.a.use(i.a);var l=[{path:"/",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"0jpQ"))},name:"index",meta:{title:"我的偶像",KeepAlive:!0}},{path:"/active-idol",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"dygQ"))},name:"active-idol",meta:{title:"活耀偶像",KeepAlive:!0}},{path:"/profile/:name",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"R2Ai"))},name:"profile",meta:{title:"偶像個人資料",KeepAlive:!0}},{path:"/rebirth",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"j9DL"))},name:"rebirth",meta:{title:"偶像轉生",KeepAlive:!0}},{path:"/chatroom",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"4gOU"))},name:"chatroom",meta:{title:"聊天室",KeepAlive:!0}},{path:"/create-profile",component:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"mNwH"))},name:"create-profile",meta:{title:"創建偶像"}},{path:"/update-password",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"4shS"))},name:"update-password",meta:{title:"修改密碼"}}],c=new i.a({mode:"history",linkActiveClass:"active",routes:l});function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=Date.now(),m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"variables",value:function(){a.a.prototype.first_load=!0}},{key:"methods",value:function(){a.a.prototype.reload=function(){if(Date.now()>u){var e=new Date;return e.setSeconds(e.getSeconds()+5),u=e,!0}return!1},a.a.prototype.characters_img_path=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";return"https://f000.backblazeb2.com/file/idolmoment/characters/".concat(e).concat(".",t)}}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}();try{n("9Wh1"),n("xsx4"),n("7Lkh"),window.Swal=n("PdH4"),m.variables(),m.methods(),new a.a({el:"#app",store:r.a,data:function(){return{loaded:!1,danger_msg:null}},created:function(){var e=this;this.$store.dispatch("load_my_profile").then((function(){e.loaded=!0;var t=null;e.$store.state.profile&&Echo.private("danger-channel-".concat(e.$store.state.profile.name)).listen(".danger-event",(function(n){var o=n.message;o&&(e.danger_msg&&clearTimeout(t),e.danger_msg=o,t=setTimeout((function(){e.danger_msg=null}),1e4))}))}))},methods:{logout:function(){Swal.fire({title:"登出",text:"確定登出?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消",focusCancel:!0}).then((function(e){e.isConfirmed&&(document.location.href="/logout",localStorage.removeItem("token"))}))},lightSwitch:function(e){var t=new Date;t.setTime(t.getTime()+31536e6);var n=document.getElementsByTagName("link"),o=n[n.length-1],a=document.getElementsByTagName("body")[0];e.target.checked?(a.className="dark",document.cookie="dark_theme=true; expires="+t.toString()+"; path=/",localStorage.dark_theme=!0,o.href="/css/sweetalert2.dark.theme.css"):(a.className="",document.cookie="dark_theme=false; expires="+t.toString()+"; path=/",localStorage.dark_theme=!1,o.href="/css/sweetalert2.default.theme.css")}},router:c}),c.beforeEach((function(e,t,n){r.a.state.IsCreated?n():"create-profile"!==e.name&&"update-password"!==e.name?n({name:"create-profile"}):n()}))}catch(e){console.log(e)}},xsx4:function(e,t,n){"use strict";n.r(t);var o=n("Vjiq");try{window.Pusher=n("eC5B"),window.Echo=new o.a({broadcaster:"pusher",key:"bfddb21a2101f2af2297",cluster:"ap3",forceTLS:!0})}catch(e){}}},[[0,1,0]]]);