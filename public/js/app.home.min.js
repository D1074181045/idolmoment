(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(t,e,a){t.exports=a("PZLa")},"8s58":function(t,e,a){"use strict";a("9MqI")},"9MqI":function(t,e){},Jc6O:function(t,e,a){"use strict";var s=a("XuX8"),i=a.n(s),o=a("L2JU");i.a.use(o.a);var r=new o.a.Store({state:{error:{status:0,message:null},ban_type:{signature:{status:!1,time:null},activity:{status:!1,time:null},cooperation:{status:!1,time:null},operating:{status:!1,time:null},chat:{status:!1,time:null}},profile:null,cool_down:null,teetee_info:null,IsCreated:!1,api_prefix:"/api/"},mutations:{cool_down:function(t,e){if(t.cool_down[e]){var a=new Date(t.cool_down[e]).getTime()?new Date(t.cool_down[e]).getTime():new Date((o=t.cool_down[e],r=o.split(/[- :]/),new Date(parseInt(r[0]),parseInt(r[1])-1,parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])))).getTime();if(a>Date.now()){var s=Math.ceil((a-Date.now())/1e3);t.ban_type[e].status=!0,t.ban_type[e].time=s;var i=setInterval((function(){s=Math.ceil((a-Date.now())/1e3),t.ban_type[e].time=s,s<1&&(t.ban_type[e].status=!1,t.ban_type[e].time=null,clearInterval(i))}),1e3)}}var o,r},show_error:function(t,e){t.error.status=!0,t.error.message=e,setTimeout((function(){t.error.status=0,t.error.message=null}),3e3)},load_my_profile:function(t,e){t.IsCreated=e.status,e.status&&(t.cool_down=e.cool_down,t.profile=e.profile,t.teetee_info=e.teetee_info)}},getters:{disabled_class:function(){return function(t){return t?"is-invalid":"is-valid"}},NumberFormat:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN";if(null==t)return null;switch(e){case"zh-TW":return new Intl.NumberFormat(e,{notation:"compact",compactDisplay:"long"}).format(t);default:return(new Intl.NumberFormat).format(t)}}}},actions:{load_my_profile:function(t){var e=t.commit,a=this.state.api_prefix.concat("my-profile");return new Promise((function(t,s){axios.get(a).then((function(a){e("load_my_profile",a),t()})).catch((function(){s()}))}))}}});e.a=r},PZLa:function(t,e,a){"use strict";a.r(e);var s=a("XuX8"),i=a.n(s),o=a("jE9Z"),r=a("Jc6O"),n=a("v9aq"),c=new RegExp("^[㄀-ㄯ一-龥a-zA-Z0-9 ]+$"),l={data:function(){return{class_signature_disabled:!1,next_ability:{}}},components:{msg:n.a},computed:{signature:function(){return this.profile.signature},signature_disabled:function(){return this.$store.state.ban_type.signature.status},activity_disabled:function(){return this.$store.state.ban_type.activity.status},cooperation_disabled:function(){return this.$store.state.ban_type.cooperation.status},profile:function(){return this.$store.state.profile},teetee_info:function(){return this.$store.state.teetee_info},cool_down:function(){return this.$store.state.cool_down},signature_ban:function(){return this.$store.state.ban_type.signature},activity_ban:function(){return this.$store.state.ban_type.activity},cooperation_ban:function(){return this.$store.state.ban_type.cooperation},api_prefix:function(){return this.$store.state.api_prefix}},beforeRouteLeave:function(t,e,a){var s=this;Object.keys(this.next_ability).forEach((function(t){s.next_ability[t]&&(s.profile[t]=s.next_ability[t])})),a()},mounted:function(){this.$store.commit("cool_down","activity"),this.$store.commit("cool_down","cooperation"),this.$store.commit("cool_down","signature")},activated:function(){document.title="我的偶像",this.next_ability={},this.first_load||this.$store.dispatch("load_my_profile")},methods:{set_teetee:function(t){var e=this;if(null===this.profile.teetee||!(this.profile.teetee.length>12||!this.profile.teetee.match(c)&&0!==this.profile.teetee.length)){var a=this.api_prefix.concat("update-teetee");t.target.className+=" ".concat("btn-loading"),axios.patch(a,{teetee:this.profile.teetee}).then((function(t){var a=t.teetee_status,s=t.teetee_name;e.teetee_info.status=a,e.teetee_info.teetee_name=s})).finally((function(){t.target.className="btn btn-info"}))}},set_signature:function(){var t=this;if(!this.signature_disabled){var e=this.api_prefix.concat("update-signature");this.signature_ban.status=!0,axios.patch(e,{signature:this.signature}).then((function(e){var a=e.status,s=e.signature_time;a?(t.cool_down.signature=s,t.$store.commit("cool_down","signature")):t.signature_ban.status=!1})).catch((function(e){t.signature_ban.status=!1}))}},ban_signature:function(){this.signature_ban.time||(this.signature_ban.status=this.signature&&!this.signature.match(c)||this.signature.length>30,this.class_signature_disabled=this.signature&&!this.signature.match(c)||this.signature.length>30)},do_activity:function(t){var e=this;if(!this.activity_disabled){var a=this.api_prefix.concat("activity");this.activity_ban.status=!0,axios.patch(a,{activity_type:t}).then((function(t){var a=t.status,s=t.ability,i=t.activity_time;a?(e.cool_down.activity=i,e.$store.commit("cool_down","activity"),Object.keys(s).forEach((function(t){e.profile[t]=e.next_ability[t]?e.next_ability[t]:e.profile[t],e.next_ability[t]=e.profile[t]!==s[t]?s[t]:null}))):e.activity_ban.status=!1})).catch((function(t){e.activity_ban.status=!1}))}},do_cooperation:function(t){var e=this;if(!this.cooperation_disabled&&this.teetee_info.status){var a=this.api_prefix.concat("cooperation");this.cooperation_ban.status=!0,axios.patch(a,{cooperation_type:t}).then((function(t){var a=t.status,s=t.ability,i=t.cooperation_time;a?(e.cool_down.cooperation=i,e.$store.commit("cool_down","cooperation"),Object.keys(s).forEach((function(t){e.profile[t]=e.next_ability[t]?e.next_ability[t]:e.profile[t],e.next_ability[t]=e.profile[t]!==s[t]?s[t]:null}))):e.cooperation_ban.status=!1})).catch((function(t){e.cooperation_ban.status=!1}))}}}},_=(a("YboV"),a("KHd+")),p=Object(_.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tb"},[a("h3",[t._v("我的偶像")]),t._v(" "),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{staticClass:"table-active"},[t._v("暱稱")]),t._v(" "),a("td",[t._v(t._s(t.profile.nickname))]),t._v(" "),a("td",{staticStyle:{width:"80px"},attrs:{rowspan:"2"}},[a("div",{staticClass:"img-big"},[a("picture",[a("source",{attrs:{type:"image/webp",srcset:t.characters_img_path(t.profile.game_character.img_file_name,"webp")}}),t._v(" "),a("source",{attrs:{type:"image/jpeg",srcset:t.characters_img_path(t.profile.game_character.img_file_name)}}),t._v(" "),a("source",{attrs:{type:"image/png",srcset:t.characters_img_path(t.profile.game_character.img_file_name,"png")}}),t._v(" "),a("img",{attrs:{src:t.characters_img_path(t.profile.game_character.img_file_name),alt:t.profile.game_character.tc_name},on:{error:t.img_error}})])])])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("偶像")]),t._v(" "),a("td",[t._v(t._s(t.profile.game_character.tc_name))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("人氣")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.popularity))+"\n                    "),t.next_ability.popularity?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.popularity))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("名聲")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.reputation))+"\n                    "),t.next_ability.reputation?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.reputation))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("最大生命值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.max_vitality))+"\n                    "),t.next_ability.max_vitality?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.max_vitality))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("目前生命值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.current_vitality))+"\n                    "),t.next_ability.current_vitality?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.current_vitality))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("精力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.energy))+"\n                    "),t.next_ability.energy?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.energy))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("抗壓性")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.resistance))+"\n                    "),t.next_ability.resistance?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.resistance))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("魅力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.charm))+"\n                    "),t.next_ability.charm?a("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.charm))+"\n                    ")]):t._e()])]),t._v(" "),a("tr",[a("th",{staticClass:"table-secondary"},[t._v("轉生次數")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.rebirth_counter)))])])])])]),t._v(" "),a("div",{staticClass:"tb"},[a("h3",[t._v("個人設定")]),t._v(" "),t.signature_ban.time?a("msg",[t._v("剩餘時間："+t._s(t.signature_ban.time))]):t._e(),t._v(" "),a("div",{staticClass:"tb-gap"},[a("div",{staticClass:"setting"},[a("label",{staticStyle:{width:"80px","margin-bottom":"0"}},[t._v("簽名檔")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.signature,expression:"profile.signature"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.class_signature_disabled),attrs:{placeholder:"最多30個字",type:"text"},domProps:{value:t.profile.signature},on:{input:[function(e){e.target.composing||t.$set(t.profile,"signature",e.target.value)},t.ban_signature]}}),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.signature_disabled},on:{click:t.set_signature}},[t._v("更新\n                ")])]),t._v(" "),a("div",{staticClass:"setting"},[a("label",{staticStyle:{width:"80px","margin-bottom":"0"}},[t._v("貼貼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.teetee,expression:"profile.teetee"}],staticClass:"form-control",class:t.$store.getters.disabled_class(!t.teetee_info.status),attrs:{type:"text",maxlength:"12"},domProps:{value:t.profile.teetee},on:{input:function(e){e.target.composing||t.$set(t.profile,"teetee",e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.set_teetee}},[t._v("設定")])])])],1),t._v(" "),t.profile.graduate?a("div",{staticClass:"tb"},[a("h3",[t._v("已畢業，無法進行任何活動")]),t._v(" "),t._m(0)]):a("div",{staticClass:"tb"},[a("h3",[t._v("個人活動")]),t._v(" "),t.activity_ban.time?a("msg",[t._v("剩餘時間："+t._s(t.activity_ban.time))]):t._e(),t._v(" "),a("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("adult-live")}}},[t._v("成人直播\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("live")}}},[t._v("直播\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("do-good-things")}}},[t._v("做善事\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("go-to-sleep")}}},[t._v("睡覺\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("meditation")}}},[t._v("打坐\n            ")])]),t._v(" "),a("h3",{staticStyle:{"padding-top":"15px","border-top":"1px solid var(--border-color)"}},[t._v("合作活動")]),t._v(" "),t.cooperation_ban.time?a("msg",[t._v("剩餘時間："+t._s(t.cooperation_ban.time))]):t._e(),t._v(" "),a("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.cooperation_disabled||!t.teetee_info.status||t.teetee_info.teetee_graduate},on:{click:function(e){return t.do_cooperation("play-ordinary-game")}}},[t._v("玩普通遊戲\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.cooperation_disabled||!t.teetee_info.status||t.teetee_info.teetee_graduate},on:{click:function(e){return t.do_cooperation("play-tacit-game")}}},[t._v("玩默契遊戲\n            ")])])],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("成人直播")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("直播")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("做善事")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("睡覺")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("打坐")])])}],!1,null,"7597a502",null).exports,d={data:function(){return{search_name:null,page_num:1,total_pages:1,max_popularity:1,current_popularity:this.$store.state.profile.popularity,idol_list:[],profile_path:"/profile/",first_page_disabled:!1,last_page_disabled:!1,up_page_disabled:!1,down_page_disabled:!1}},computed:{name:function(){return this.$store.state.profile.name},teetee_info:function(){return this.$store.state.teetee_info},api_prefix:function(){return this.$store.state.api_prefix}},activated:function(){document.title="活耀偶像",this.reload()&&(this.current_popularity=this.$store.state.profile.popularity,this.page_num=1,this.default_load())},methods:{toProfile:function(t){this.$router.push({name:"profile",params:{name:t}})},check_page_num:function(t){return t>this.total_pages?this.page_num=this.total_pages:t<1?this.page_num=1:t},get_idol_list:function(t,e){var a=this;t=this.check_page_num(t);var s=this.api_prefix.concat("change-page");this.current_popularity=e,axios.get(s,{params:{page:t,popularity:e}}).then((function(t){var e=t.status,s=t.idol_list,i=t.max_popularity,o=t.total_pages;e&&(a.total_pages=o,a.max_popularity=i,a.idol_list=s,a.down_page_disabled=a.page_num>=o,a.last_page_disabled=a.page_num>=o,a.page_num<=1?(a.up_page_disabled=!0,a.first_page_disabled=a.current_popularity>=i):(a.first_page_disabled=!1,a.up_page_disabled=!1))}))},page:function(){this.page_num<=0&&(this.page_num=1),this.get_idol_list(this.page_num,this.current_popularity)},to_search_name:function(){var t=this;if(this.search_name){var e=this.api_prefix.concat("change-page");axios.get(e,{params:{search_name:this.search_name}}).then((function(e){var a=e.status,s=e.idol_list;a&&(t.idol_list=s)}))}},default_load:function(){this.get_idol_list(this.page_num,this.current_popularity)},first_page:function(){this.page_num=1,this.get_idol_list(this.page_num,this.max_popularity)},last_page:function(){this.page_num=this.total_pages,this.get_idol_list(this.page_num,this.current_popularity)},up_page:function(){this.page_num-=1,this.get_idol_list(this.page_num,this.current_popularity)},down_page:function(){this.page_num+=1,this.get_idol_list(this.page_num,this.current_popularity)},search_popularity:function(){this.page_num=1,this.get_idol_list(this.page_num,this.current_popularity)},clear_search:function(){this.default_load(),this.search_name=null},idol_class:function(t){return{self:this.name===t.name,teetee:this.teetee_info.status&&this.teetee_info.teetee_name===t.name&&this.teetee_info.status,graduate:t.graduate}}}},u=(a("yckW"),Object(_.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tb"},[a("h3",[t._v("活躍偶像")]),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("div",{staticClass:"offset-0",staticStyle:{"margin-right":"0"}},[a("label",{staticClass:"col-md-2 col-form-label text-md-right",staticStyle:{"padding-top":"calc(.7rem + 1px)"},attrs:{for:"name"}},[t._v("搜尋暱稱")]),t._v(" "),a("div",{staticClass:"col-md-6 row",staticStyle:{display:"inline"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search_name,expression:"search_name"}],staticClass:"form-control",staticStyle:{width:"200px",margin:"6px 2px",display:"inline"},attrs:{type:"text",id:"name",name:"name"},domProps:{value:t.search_name},on:{input:function(e){e.target.composing||(t.search_name=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-info",staticStyle:{"margin-top":"-6px",height:"36px"},attrs:{id:"search-name",name:"search-name",type:"button"},on:{click:t.to_search_name}},[t._v("搜尋\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-info",staticStyle:{"margin-top":"-6px",height:"36px"},attrs:{id:"clear_search",name:"clear_search",type:"button"},on:{click:t.clear_search}},[t._v("清除搜尋\n                ")])])]),t._v(" "),a("div",{staticClass:"offset-0",staticStyle:{"margin-right":"0"}},[a("label",{staticClass:"col-md-2 col-form-label text-md-right",staticStyle:{"padding-top":"calc(.7rem + 1px)"},attrs:{for:"search-popularity"}},[t._v("人氣規模")]),t._v(" "),a("div",{staticClass:"col-md-6 row",staticStyle:{display:"inline"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current_popularity,expression:"current_popularity"}],staticClass:"form-control",staticStyle:{width:"100px",margin:"6px 2px",display:"inline"},attrs:{type:"number",id:"search-popularity",min:"1",name:"search-popularity"},domProps:{value:t.current_popularity},on:{change:t.search_popularity,input:function(e){e.target.composing||(t.current_popularity=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"offset-0"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button",value:"1",disabled:t.first_page_disabled},on:{click:t.first_page}},[t._v("第一頁\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:"",value:"1",disabled:t.up_page_disabled},on:{click:t.up_page}},[t._v("上一頁\n            ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.page_num,expression:"page_num"}],staticClass:"form-control",staticStyle:{width:"70px",margin:"6px 2px",display:"inline"},attrs:{type:"number",min:"1",max:t.total_pages,value:"1"},domProps:{value:t.page_num},on:{change:t.page,input:function(e){e.target.composing||(t.page_num=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.down_page_disabled},on:{click:t.down_page}},[t._v("下一頁\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.last_page_disabled},on:{click:t.last_page}},[t._v("最後一頁\n            ")])])]),t._v(" "),a("table",{staticClass:"table table-hover",staticStyle:{"min-width":"560px","margin-top":"1rem"}},[t._m(0),t._v(" "),a("tbody",t._l(t.idol_list,(function(e){return a("tr",{key:e.name,class:t.idol_class(e),staticStyle:{cursor:"pointer"},on:{click:function(a){return t.toProfile(e.name)}}},[a("td",{staticStyle:{padding:"0"}},[a("div",{staticClass:"img-small"},[a("picture",[a("source",{attrs:{type:"image/webp",srcset:t.characters_img_path(e.img_file_name,"webp")}}),t._v(" "),a("source",{attrs:{type:"image/jpeg",srcset:t.characters_img_path(e.img_file_name)}}),t._v(" "),a("source",{attrs:{type:"image/png",srcset:t.characters_img_path(e.img_file_name,"png")}}),t._v(" "),a("img",{attrs:{src:t.characters_img_path(e.img_file_name),alt:e.use_character},on:{error:t.img_error}})])])]),t._v(" "),a("td",[t._v(t._s(t.$store.getters.NumberFormat(e.popularity,"zh-TW")))]),t._v(" "),a("td",[t._v(t._s(t.$store.getters.NumberFormat(e.reputation,"zh-TW")))]),t._v(" "),a("td",{staticStyle:{padding:"0",height:"50px",width:"50%"}},[a("div",{staticStyle:{height:"100%"}},[a("div",{staticStyle:{padding:"4px 8px"}},[t._v(t._s(e.nickname))]),t._v(" "),a("div",{staticStyle:{"border-top":"1px solid var(--border-color)",padding:"4px 8px"}},[t._v(t._s(e.signature))])])]),t._v(" "),a("td",[t._v(t._s(e.tc_name))])])})),0)]),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("div",{staticClass:"offset-0"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button",value:"1",disabled:t.first_page_disabled},on:{click:t.first_page}},[t._v("第一頁\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:"",value:"1",disabled:t.up_page_disabled},on:{click:t.up_page}},[t._v("上一頁\n            ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.page_num,expression:"page_num"}],staticClass:"form-control",staticStyle:{width:"70px",margin:"6px 2px",display:"inline"},attrs:{type:"number",min:"1",max:t.total_pages,value:"1"},domProps:{value:t.page_num},on:{change:t.page,input:function(e){e.target.composing||(t.page_num=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.total_pages<=1||t.down_page_disabled},on:{click:t.down_page}},[t._v("下一頁\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.total_pages<=1||t.last_page_disabled},on:{click:t.last_page}},[t._v("最後一頁\n            ")])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",{staticStyle:{width:"60px"}},[t._v("頭像")]),t._v(" "),a("th",{staticStyle:{width:"60px"}},[t._v("人氣")]),t._v(" "),a("th",{staticStyle:{width:"60px"}},[t._v("名聲")]),t._v(" "),a("th",[t._v("暱稱")]),t._v(" "),a("th",[t._v("偶像")])])])}],!1,null,"68ac1224",null).exports),m={data:function(){return{information_list:[],next_name:null,opposite_profile:{game_character:{}},profile_type:localStorage.profile_type?localStorage.profile_type:"details",opposite_loaded:!1,title:null}},components:{msg:n.a},computed:{self_profile:function(){return this.$store.state.profile},operating_ban:function(){return this.$store.state.ban_type.operating},operating_disabled:function(){return this.$store.state.ban_type.operating.status},api_prefix:function(){return this.$store.state.api_prefix},cool_down:function(){return this.$store.state.cool_down}},created:function(){switch(localStorage.profile_type){case"details":this.details();break;case"comparison":this.comparison();break;default:this.details()}},mounted:function(){this.$store.commit("cool_down","operating")},activated:function(){document.title=this.title?this.title:"玩家資訊",this.get_opposite_profile()},methods:{get_opposite_profile:function(){var t=this,e=this.api_prefix.concat("profile/",this.$route.params.name);axios.get(e).then((function(e){var a=e.status,s=e.opposite_profile;a&&(t.title||(document.title=t.title="玩家資訊".concat("-",s.nickname)),t.opposite_profile=s,t.opposite_loaded=!0)}))},switch_show:function(){switch(this.get_profile_type()){case"details":this.details();break;case"comparison":this.comparison();break;default:this.details()}},get_profile_type:function(){switch(localStorage.profile_type){case"details":return"comparison";case"comparison":return"details";default:return"comparison"}},details:function(){this.next_name="查看能力比對",this.profile_type=localStorage.profile_type="details"},comparison:function(){this.next_name="顯示詳細資料",this.profile_type=localStorage.profile_type="comparison"},operating:function(t){var e=this;if(("send-blade"!==t||this.$store.state.teetee_info.teetee_name!==this.$route.params.name)&&!this.operating_ban.time){var a=this.api_prefix.concat("operating");this.operating_ban.status=!0,axios.patch(a,{opposite_name:this.$route.params.name,operating_type:t}).then((function(t){var a=t.status,s=t.ability,i=t.operating_time,o=t.information;a?(e.cool_down.operating=i,e.$store.commit("cool_down","operating"),Object.keys(s.opposite).forEach((function(t){e.opposite_profile[t]=s.opposite[t]})),Object.keys(s.self).forEach((function(t){e.self_profile[t]=s.self[t]})),e.information_list.push(o)):e.operating_ban.status=!1})).catch((function(t){e.operating_ban.status=!1}))}}}},h=Object(_.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tb"},[a("h3",[t._v("玩家資料")]),t._v(" "),a("div",{staticClass:"text-center",staticStyle:{margin:"12px 0 12px 0"}},[a("button",{staticClass:"btn btn-info",staticStyle:{width:"115px"},attrs:{type:"button"},on:{click:t.switch_show}},[t._v(t._s(t.next_name)+"\n            ")])]),t._v(" "),"details"===t.profile_type?a("div",{attrs:{id:"details"}},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{staticClass:"table-active"},[t._v("暱稱")]),t._v(" "),a("td",[t._v(t._s(t.opposite_profile.nickname))]),t._v(" "),a("td",{staticStyle:{width:"80px"},attrs:{rowspan:"2"}},[a("div",{staticClass:"img-big"},[t.opposite_loaded?a("picture",[a("source",{attrs:{type:"image/webp",srcset:t.characters_img_path(t.opposite_profile.game_character.img_file_name,"webp")}}),t._v(" "),a("source",{attrs:{type:"image/jpeg",srcset:t.characters_img_path(t.opposite_profile.game_character.img_file_name)}}),t._v(" "),a("source",{attrs:{type:"image/png",srcset:t.characters_img_path(t.opposite_profile.game_character.img_file_name,"png")}}),t._v(" "),a("img",{attrs:{src:t.characters_img_path(t.opposite_profile.game_character.img_file_name),alt:t.opposite_profile.game_character.tc_name},on:{error:t.img_error}})]):t._e()])])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("偶像")]),t._v(" "),a("td",[t._v(t._s(t.opposite_profile.game_character.tc_name))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("人氣")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.popularity)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("名聲")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.reputation)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("最大生命值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.max_vitality)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("精力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.energy)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("抗壓性")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.resistance)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-info"},[t._v("魅力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.charm)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-primary"},[t._v("簽名檔")]),t._v(" "),a("td",{staticStyle:{color:"#DC3545"},attrs:{colspan:"2"}},[t._v(t._s(t.opposite_profile.signature))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-secondary"},[t._v("轉生次數")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.rebirth_counter)))])])])])]):a("div",{staticStyle:{display:"flex"}},[a("table",{staticClass:"table",staticStyle:{width:"50%"}},[a("tbody",[t._m(0),t._v(" "),a("tr",[a("td",{staticStyle:{width:"80px"},attrs:{colspan:"2"}},[a("div",{staticClass:"img-big"},[a("picture",[a("source",{attrs:{type:"image/webp",srcset:t.characters_img_path(t.self_profile.game_character.img_file_name,"webp")}}),t._v(" "),a("source",{attrs:{type:"image/jpeg",srcset:t.characters_img_path(t.self_profile.game_character.img_file_name)}}),t._v(" "),a("source",{attrs:{type:"image/png",srcset:t.characters_img_path(t.self_profile.game_character.img_file_name,"png")}}),t._v(" "),a("img",{attrs:{src:t.characters_img_path(t.self_profile.game_character.img_file_name),alt:t.self_profile.game_character.tc_name},on:{error:t.img_error}})])])])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("暱稱")]),t._v(" "),a("td",[t._v(t._s(t.self_profile.nickname))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("偶像")]),t._v(" "),a("td",[t._v(t._s(t.self_profile.game_character.tc_name))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("人氣")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.self_profile.popularity)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("名聲")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.self_profile.reputation)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("最大生命值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.self_profile.max_vitality)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("精力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.self_profile.energy)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("抗壓性")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.self_profile.resistance)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("魅力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.self_profile.charm)))])])])]),t._v(" "),a("table",{staticClass:"table",staticStyle:{width:"50%"}},[a("tbody",[t._m(1),t._v(" "),a("tr",[a("td",{staticStyle:{width:"80px"},attrs:{colspan:"2"}},[a("div",{staticClass:"img-big"},[t.opposite_loaded?a("picture",[a("source",{attrs:{type:"image/webp",srcset:t.characters_img_path(t.opposite_profile.game_character.img_file_name,"webp")}}),t._v(" "),a("source",{attrs:{type:"image/jpeg",srcset:t.characters_img_path(t.opposite_profile.game_character.img_file_name)}}),t._v(" "),a("source",{attrs:{type:"image/png",srcset:t.characters_img_path(t.opposite_profile.game_character.img_file_name,"png")}}),t._v(" "),a("img",{attrs:{src:t.characters_img_path(t.opposite_profile.game_character.img_file_name),alt:t.opposite_profile.game_character.tc_name},on:{error:t.img_error}})]):t._e()])])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("暱稱")]),t._v(" "),a("td",[t._v(t._s(t.opposite_profile.nickname))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("偶像")]),t._v(" "),a("td",[t._v(t._s(t.opposite_profile.game_character.tc_name))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("人氣")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.popularity)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("名聲")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.reputation)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("最大生命值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.max_vitality)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("精力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.energy)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("抗壓性")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.resistance)))])]),t._v(" "),a("tr",[a("th",{staticClass:"table-active"},[t._v("魅力")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.opposite_profile.charm)))])])])])])]),t._v(" "),t.opposite_profile.name!==t.self_profile.name&&t.opposite_loaded?a("div",{staticClass:"tb"},[t.opposite_profile.graduate?a("div",[a("h3",[t._v("對方已畢業")]),t._v(" "),t._m(2)]):t.self_profile.graduate?a("div",[a("h3",[t._v("你已畢業")]),t._v(" "),t._m(3)]):a("div",[a("h3",[t._v("操作")]),t._v(" "),t.operating_ban.time?a("msg",[t._v("剩餘時間："+t._s(t.operating_ban.time))]):t._e(),t._v(" "),a("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.operating_disabled||t.$store.state.teetee_info.teetee_name===t.$route.params.name},on:{click:function(e){return t.operating("send-blade")}}},[t._v("\n                    寄刀片\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.operating_disabled},on:{click:function(e){return t.operating("endorse")}}},[t._v("聲援\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.operating_disabled},on:{click:function(e){return t.operating("donate")}}},[t._v("斗內\n                ")])])],1)]):t._e(),t._v(" "),a("div",{staticClass:"tb"},[a("h3",[t._v("獲得情報")]),t._v(" "),t._l(t.information_list,(function(e,s){return a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{color:"rgb(153, 153, 153)","user-select":"none",width:"30px"}},[t._v(t._s(s+1))]),t._v(" "),a("div",{staticStyle:{display:"flex"},domProps:{innerHTML:t._s(e)}})])}))],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{staticClass:"table-active",staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[this._v("\n                        我的偶像\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{staticClass:"table-active",staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[this._v("\n                        對方偶像\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[e("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[this._v("寄刀片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[e("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[this._v("寄刀片")])])}],!1,null,null,null).exports,v={data:function(){return{rebirth_disabled:!0,selected_character:"",own_character_list:[]}},computed:{api_prefix:function(){return this.$store.state.api_prefix}},activated:function(){document.title="偶像轉生",this.get_own_character().then((function(){document.getElementsByClassName("character-frame").length&&document.getElementsByClassName("character-frame")[0].firstChild.click()}))},methods:{character_select_status:function(t){return this.selected_character===t?"current-select":"not-select"},get_own_character:function(){var t=this;return axios.get(this.api_prefix.concat("own-character")).then((function(e){var a=e.status,s=e.own_character_list;a&&(t.own_character_list=s)}))},select_character:function(t){this.selected_character=t,this.rebirth_disabled=!1},to_rebirth:function(){var t=this;this.rebirth_disabled=!0;var e=this.api_prefix.concat("rebirth");axios.patch(e,{character_name:this.selected_character}).then((function(e){e.status?t.$router.push({name:"index"}):t.rebirth_disabled=!1})).catch((function(e){t.rebirth_disabled=!1}))}}},f=(a("8s58"),Object(_.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tb"},[a("h3",[t._v("選擇轉生偶像")]),t._v(" "),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.own_character_list,(function(e){return a("div",{staticClass:"character-frame"},[a("div",{class:t.character_select_status(e.character_name),on:{click:function(a){return t.select_character(e.character_name)}}},[a("div",{staticClass:"img-big"},[a("picture",[a("source",{attrs:{type:"image/webp",srcset:t.characters_img_path(e.game_character.img_file_name,"webp")}}),t._v(" "),a("source",{attrs:{type:"image/jpeg",srcset:t.characters_img_path(e.game_character.img_file_name)}}),t._v(" "),a("source",{attrs:{type:"image/png",srcset:t.characters_img_path(e.game_character.img_file_name,"png")}}),t._v(" "),a("img",{attrs:{src:t.characters_img_path(e.game_character.img_file_name),alt:e.character_name},on:{error:t.img_error}})])]),t._v(" "),a("div",{staticStyle:{flex:"auto"}},[a("p",{staticStyle:{"margin-top":"1rem"}},[t._v("\n                            "+t._s(e.game_character.introduction)+"\n                        ")])]),t._v(" "),a("table",{staticClass:"table"},[a("tbody",{staticClass:"thead-light"},[a("tr",[a("th",{staticClass:"text-center"},[t._v("英文名稱")]),t._v(" "),a("td",[t._v(t._s(e.game_character.en_name))])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("中文名稱")]),t._v(" "),a("td",[t._v(t._s(e.game_character.tc_name))])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("生命值")]),t._v(" "),a("td",[t._v(t._s(e.game_character.vitality))])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("精力")]),t._v(" "),a("td",[t._v(t._s(e.game_character.energy))])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("抗壓性")]),t._v(" "),a("td",[t._v(t._s(e.game_character.resistance))])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("魅力")]),t._v(" "),a("td",[t._v(t._s(e.game_character.charm))])])])])])])})),0)]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-block",staticStyle:{margin:"0 0"},attrs:{disabled:t.rebirth_disabled},on:{click:t.to_rebirth}},[t._v("轉生\n    ")])])}),[],!1,null,"7dac77de",null).exports),g=!0,b=!1,y={data:function(){return{message:"",chat_messages:[]}},components:{msg:n.a},computed:{chat_ban:function(){return this.$store.state.ban_type.chat},create_msg_disabled:function(){return this.$store.state.ban_type.chat.status},api_prefix:function(){return this.$store.state.api_prefix},cool_down:function(){return this.$store.state.cool_down}},updated:function(){this.tbody_scroll_bottom()},mounted:function(){this.tbody_scroll_position()},activated:function(){document.title="聊天室",this.$store.commit("cool_down","chat"),this.get_chats(),this.websocket_chat_event()},deactivated:function(){Echo.leave("public-chat-channel")},methods:{tbody_scroll_bottom:function(){if(b){if(g){var t=document.getElementsByTagName("tbody")[0];t.scrollTop=t.scrollHeight}b=!1}},tbody_scroll_position:function(){var t=document.getElementsByTagName("tbody")[0];t.onscroll=function(){var e=t.scrollHeight-t.scrollTop;g=e<=t.offsetHeight}},get_chats:function(){var t=this,e=this.api_prefix.concat("get-chats");axios.get(e).then((function(e){var a=e.status,s=e.chat_messages;a&&(t.chat_messages=s)})).then((function(){var t=document.getElementsByTagName("tbody")[0];t.scrollTop=t.scrollHeight}))},websocket_chat_event:function(){var t=this;Echo.channel("public-chat-channel").listen(".public-chat-event",(function(e){var a=e.name,s=e.nickname,i=e.message,o=e.chat_created_at;t.chat_messages.push({name:a,nickname:s,message:i,created_at:o}),b=!0}))},create_message:function(){var t=this;if(!this.create_msg_disabled){var e=this.api_prefix.concat("create-message");this.chat_ban.status=!0,axios.post(e,{message:this.message}).then((function(e){var a=e.status,s=e.chat_time;a?(t.cool_down.chat=s,t.$store.commit("cool_down","chat")):t.chat_ban.status=!1})).catch((function(e){t.chat_ban.status=!1})),this.message=""}},TimeStamp2DateTime:function(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s.toString():s;var i=e.getDate();i=i<10?"0"+i.toString():i;var o=e.getHours();o=o<10?"0"+o.toString():o;var r=e.getMinutes();r=r<10?"0"+r.toString():r;var n=e.getSeconds();return a+"-"+s+"-"+i+" "+o+":"+r+":"+(n=n<10?"0"+n.toString():n)},create_enter:function(){var t=this;document.onkeydown=function(e){13===e.keyCode&&t.create_message()}}}},w=(a("farK"),Object(_.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tb",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.create_enter(e)}}},[a("h3",[t._v("聊天室")]),t._v(" "),a("table",{staticClass:"table table-hover",staticStyle:{"margin-top":"1rem"}},[t._m(0),t._v(" "),a("tbody",t._l(t.chat_messages,(function(e){return a("tr",[a("td",{staticStyle:{width:"150px"}},[a("router-link",{staticStyle:{"font-size":"12px"},attrs:{to:{name:"profile",params:{name:e.name}},exact:""}},[t._v("\n                    "+t._s(e.nickname)+"\n                ")])],1),t._v(" "),a("td",[t._v(t._s(e.message))]),t._v(" "),a("td",{staticStyle:{width:"160px"}},[t._v(t._s(t.TimeStamp2DateTime(e.created_at)))])])})),0)]),t._v(" "),t.chat_ban.time?a("msg",{staticStyle:{"margin-bottom":"10px"}},[t._v("剩餘時間："+t._s(t.chat_ban.time))]):t._e(),t._v(" "),a("div",{staticClass:"setting"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{width:"15%"},attrs:{type:"button",disabled:t.create_msg_disabled},on:{click:t.create_message}},[t._v("送出\n        ")])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{staticStyle:{width:"150px"}},[this._v("暱稱")]),this._v(" "),e("th",[this._v("訊息")]),this._v(" "),e("th",{staticStyle:{width:"160px"}},[this._v("時間")])])])}],!1,null,"59c852a3",null).exports),x={data:function(){return{nickname:"",build_disabled:!0,creating:!1}},components:{msg:n.a},created:function(){document.title="創建偶像"},computed:{error:function(){return this.$store.state.error},api_prefix:function(){return this.$store.state.api_prefix}},methods:{build:function(){var t=this;if(!this.build_disabled){this.creating=!0;var e=this.api_prefix.concat("store-profile");axios.post(e,{nickname:this.nickname}).then((function(e){var a=e.status,s=e.message;a?document.location.href="/":(t.$store.commit("show_error",s),t.build_disabled=!1,t.creating=!1)})).catch((function(e){if(422===e.status){var a="",s=e.data.errors;Object.keys(s).forEach((function(t){a+=s[t]+"\n"})),t.$store.commit("show_error",a)}else t.$store.commit("show_error","發生錯誤: "+e.statusText);t.build_disabled=!1,t.creating=!1}))}},ban_build:function(){var t=new RegExp("^[㄀-ㄯ一-龥a-zA-Z0-9]+$");this.build_disabled=!this.nickname.match(t)||0===this.nickname.length||this.nickname.length>12}}},C=Object(_.a)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{color:"var(--form-control-color)"}},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"card",staticStyle:{"background-color":"var(--form-control-bg-color)"}},[a("div",{staticClass:"card-header"},[t._v("建立暱稱")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("暱稱")]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.build_disabled),staticStyle:{width:"100%"},attrs:{type:"text",autocomplete:"off",autofocus:""},domProps:{value:t.nickname},on:{input:[function(e){e.target.composing||(t.nickname=e.target.value)},t.ban_build]}}),t._v(" "),a("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[t._v("最多12字元，且無特殊字元")])]),t._v(" "),a("button",{staticClass:"btn btn-primary",class:{"btn-loading":t.creating},staticStyle:{width:"60px",height:"1%"},attrs:{type:"button",disabled:"",disabled:t.build_disabled},on:{click:t.build}},[t._v("建立\n                        ")])])]),t._v(" "),t.error.status?a("div",{staticClass:"card-footer"},[a("msg",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.error.message))])],1):t._e()])])])])}),[],!1,null,null,null).exports,k={data:function(){return{old_password:"",new_password:"",new_password_confirmation:"",new_password_disabled:!0,old_password_disabled:!0,update_password_disabled:!0,old_password_show:!1,new_password_show:!1,updating:!1}},components:{msg:n.a},created:function(){document.title="修改密碼"},computed:{error:function(){return this.$store.state.error},api_prefix:function(){return this.$store.state.api_prefix}},methods:{pw_title:function(t){return t?"顯示密碼":"隱藏密碼"},pw_type:function(t){return t?"text":"password"},old_password_toggle_button:function(t){this.old_password_show=t.target.checked},new_password_toggle_button:function(t){this.new_password_show=t.target.checked},between:function(t,e,a){return t>=e&&t<=a},ban_update_password:function(){this.old_password_disabled=!this.between(this.old_password.length,8,32),this.new_password_disabled=this.new_password!==this.new_password_confirmation||!this.between(this.new_password.length,8,32)||this.old_password===this.new_password,this.update_password_disabled=this.old_password_disabled||this.new_password_disabled},to_update_password:function(){var t=this;if(!this.update_password_disabled&&this.old_password!==this.new_password){this.updating=!0;var e=this.api_prefix.concat("update-password");axios.patch(e,{old_password:this.old_password,new_password:this.new_password,new_password_confirmation:this.new_password_confirmation}).then((function(e){var a=e.status,s=e.message;a?t.$router.push({name:"index"}).catch((function(){})):(t.$store.commit("show_error",s),t.update_password_disabled=!1)})).catch((function(e){if(422===e.status){var a="",s=e.data.errors;Object.keys(s).forEach((function(t){a+=s[t]+"\n"})),t.$store.commit("show_error",a)}else t.$store.commit("show_error","發生錯誤: "+e.status);t.update_password_disabled=!1})).finally((function(){t.updating=!1}))}}}},$=[{path:"/",component:p,name:"index",meta:{title:"我的偶像",KeepAlive:!0}},{path:"/active-idol",component:u,name:"active-idol",meta:{title:"活耀偶像",KeepAlive:!0}},{path:"/profile/:name",component:h,name:"profile",meta:{title:"偶像個人資料",KeepAlive:!0}},{path:"/rebirth",component:f,name:"rebirth",meta:{title:"偶像轉生",KeepAlive:!0}},{path:"/chatroom",component:w,name:"chatroom",meta:{title:"聊天室",KeepAlive:!0}},{path:"/create-profile",component:C,name:"create-profile",meta:{title:"創建偶像"}},{path:"/update-password",component:Object(_.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{color:"var(--form-control-color)"}},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"card",staticStyle:{"background-color":"var(--form-control-bg-color)"}},[a("div",{staticClass:"card-header"},[t._v("修改密碼")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("舊密碼")]),t._v(" "),a("div",{staticClass:"col-md-8"},["checkbox"===t.pw_type(t.old_password_show)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.old_password,expression:"old_password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.old_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(t.old_password)?t._i(t.old_password,null)>-1:t.old_password},on:{input:t.ban_update_password,change:function(e){var a=t.old_password,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&(t.old_password=a.concat([null])):o>-1&&(t.old_password=a.slice(0,o).concat(a.slice(o+1)))}else t.old_password=i}}}):"radio"===t.pw_type(t.old_password_show)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.old_password,expression:"old_password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.old_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"radio"},domProps:{checked:t._q(t.old_password,null)},on:{input:t.ban_update_password,change:function(e){t.old_password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.old_password,expression:"old_password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.old_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:t.pw_type(t.old_password_show)},domProps:{value:t.old_password},on:{input:[function(e){e.target.composing||(t.old_password=e.target.value)},t.ban_update_password]}})]),t._v(" "),a("div",{staticClass:"show-hide-toggle-button"},[a("input",{attrs:{type:"checkbox",id:"old_password_toggle_button"},on:{click:t.old_password_toggle_button}}),t._v(" "),a("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"old_password_toggle_button",title:t.pw_title(t.old_password_show)}},[t._v("Toggle")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("新密碼")]),t._v(" "),a("div",{staticClass:"col-md-8"},["checkbox"===t.pw_type(t.new_password_show)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password,expression:"new_password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(t.new_password)?t._i(t.new_password,null)>-1:t.new_password},on:{input:t.ban_update_password,change:function(e){var a=t.new_password,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&(t.new_password=a.concat([null])):o>-1&&(t.new_password=a.slice(0,o).concat(a.slice(o+1)))}else t.new_password=i}}}):"radio"===t.pw_type(t.new_password_show)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password,expression:"new_password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"radio"},domProps:{checked:t._q(t.new_password,null)},on:{input:t.ban_update_password,change:function(e){t.new_password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password,expression:"new_password"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:t.pw_type(t.new_password_show)},domProps:{value:t.new_password},on:{input:[function(e){e.target.composing||(t.new_password=e.target.value)},t.ban_update_password]}}),t._v(" "),a("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[t._v("請介於8到32字元之間")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v("確認新密碼")]),t._v(" "),a("div",{staticClass:"col-md-8"},["checkbox"===t.pw_type(t.new_password_show)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password_confirmation,expression:"new_password_confirmation"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(t.new_password_confirmation)?t._i(t.new_password_confirmation,null)>-1:t.new_password_confirmation},on:{input:t.ban_update_password,change:function(e){var a=t.new_password_confirmation,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&(t.new_password_confirmation=a.concat([null])):o>-1&&(t.new_password_confirmation=a.slice(0,o).concat(a.slice(o+1)))}else t.new_password_confirmation=i}}}):"radio"===t.pw_type(t.new_password_show)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password_confirmation,expression:"new_password_confirmation"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"radio"},domProps:{checked:t._q(t.new_password_confirmation,null)},on:{input:t.ban_update_password,change:function(e){t.new_password_confirmation=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password_confirmation,expression:"new_password_confirmation"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:t.pw_type(t.new_password_show)},domProps:{value:t.new_password_confirmation},on:{input:[function(e){e.target.composing||(t.new_password_confirmation=e.target.value)},t.ban_update_password]}})]),t._v(" "),a("div",{staticClass:"show-hide-toggle-button"},[a("input",{attrs:{type:"checkbox",id:"new_password_toggle_button"},on:{click:t.new_password_toggle_button}}),t._v(" "),a("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"new_password_toggle_button",title:t.pw_title(t.new_password_show)}},[t._v("Toggle")])])]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-block",class:{"btn-loading":t.updating},staticStyle:{margin:"0 0"},attrs:{type:"button",disabled:"",disabled:t.update_password_disabled},on:{click:t.to_update_password}},[t._v("修改\n                    ")])]),t._v(" "),t.error.status?a("div",{staticClass:"card-footer"},[a("msg",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.error.message))])],1):t._e()])])])])}),[],!1,null,null,null).exports,name:"update-password",meta:{title:"修改密碼"}}];function S(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,s;return e=t,s=[{key:"variables",value:function(){i.a.prototype.first_load=!0}},{key:"methods",value:function(){var t=Date.now();i.a.prototype.reload=function(){if(Date.now()>t){var e=new Date;return e.setSeconds(e.getSeconds()+5),t=e,!0}return!1},i.a.prototype.characters_img_path=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jpg";return"https://f000.backblazeb2.com/file/idolmoment/characters/".concat(t).concat(".",e)},i.a.prototype.img_error=function(t){for(var e=t.target.parentNode.children.length-1,a=0;a<e;a++)t.target.parentNode.children[a].srcset=t.target.parentNode.children[a+1].srcset;t.target.parentNode.children[e-1].remove()}}}],(a=null)&&S(e.prototype,a),s&&S(e,s),t}();i.a.use(o.a);var E=new o.a({mode:"history",linkActiveClass:"active",routes:$});try{a("ryeu"),N.variables(),N.methods(),new i.a({el:"#app",store:r.a,data:function(){return{loaded:!1,danger_msg:null}},created:function(){var t=this;window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token),this.$store.dispatch("load_my_profile").then((function(){t.loaded=!0,r.a.state.IsCreated&&(t.unlock_character_event(),t.danger_event())}))},methods:{logout:function(){Swal.fire({title:"登出",text:"確定登出?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消",focusCancel:!0}).then((function(t){t.isConfirmed&&(document.location.href="/logout",localStorage.removeItem("token"))}))},lightSwitch:function(t){var e=new Date;e.setTime(e.getTime()+31536e6);var a=document.getElementsByTagName("link"),s=a[a.length-1];document.getElementsByTagName("body")[0].className=t.target.checked?"dark":"",document.cookie="dark_theme=".concat(t.target.checked.toString()).concat("; expires="+e.toString()+"; path=/"),localStorage.dark_theme=t.target.checked,s.href="/css/sweetalert2.".concat(t.target.checked?"dark":"default").concat(".theme.css")},unlock_character_event:function(){var t="",e=[{keyCode:"383840403737393966656665","character-name":"Akai Haato"},{keyCode:"82828282","character-name":"Uruha Rushia"},{keyCode:"85668566","character-name":"Inugami Korone"}];document.addEventListener("keyup",(function(a){if(a.keyCode){var s=0;t+=a.keyCode.toString(),e.forEach((function(e){return t===e.keyCode?(a=e["character-name"],i=r.a.state.api_prefix.concat("unlock-character"),axios.post(i,{character_name:a}),!0):!!e.keyCode.includes(t)||void s++;var a,i})),e.length===s&&(t=a.keyCode.toString())}})),Echo.private("unlock-character-channel-".concat(this.$store.state.profile.name)).listen(".unlock-character-event",(function(t){var e,a=t.Character;e='<div style="color: #DC3545;">'+a+"</div>",Swal.fire({title:"已解鎖新偶像",html:e,icon:"success",allowOutsideClick:!1})}))},danger_event:function(){var t=this,e=null;Echo.private("danger-channel-".concat(this.$store.state.profile.name)).listen(".danger-event",(function(a){var s=a.message;s&&(t.danger_msg&&clearTimeout(e),t.danger_msg=s,e=setTimeout((function(){t.danger_msg=null}),1e4))}))}},router:E}),E.beforeEach((function(t,e,a){r.a.state.IsCreated?(i.a.prototype.first_load=!1,a()):"create-profile"!==t.name&&"update-password"!==t.name?a({name:"create-profile"}):a()}))}catch(t){console.log(t)}},"Q8j+":function(t,e,a){"use strict";a.r(e);var s=a("vDqi"),i=a.n(s);window.axios=i.a.create(),window.axios.interceptors.response.use((function(t){var e=t.headers.authorization;return e&&(localStorage.token=e.substr(7),window.axios.defaults.headers.common.Authorization="Bearer".concat(" ",localStorage.token)),t.data}),(function(t){switch(t.response.status){case 401:document.location.href="/logout",localStorage.removeItem("token")}return Promise.reject(t.response)}))},W6SR:function(t,e,a){"use strict";a.r(e);var s=a("Vjiq");try{window.Pusher=a("eC5B"),window.Echo=new s.a({broadcaster:"pusher",key:"bfddb21a2101f2af2297",cluster:"ap3",forceTLS:!0})}catch(t){}},YboV:function(t,e,a){"use strict";a("trh9")},ZMBb:function(t,e){},farK:function(t,e,a){"use strict";a("vYOs")},ohdr:function(t,e,a){try{a("SYky")}catch(t){}},ryeu:function(t,e,a){a("ohdr"),a("W6SR"),a("Q8j+"),window.Swal=a("PdH4")},trh9:function(t,e){},v9aq:function(t,e,a){"use strict";var s;a.d(e,"a",(function(){return r}));var i,o,r=a("nFaw").a.div(s||(i=["\n    color: #9A0000;\n"],o||(o=i.slice(0)),s=Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))))},vYOs:function(t,e){},yckW:function(t,e,a){"use strict";a("ZMBb")}},[[0,0,1]]]);