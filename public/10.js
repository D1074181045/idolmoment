(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"4shS":function(s,o,t){"use strict";t.r(o);var e=t("v9aq"),a=(t("Jc6O"),{data:function(){return{old_password:"",new_password:"",new_password_confirm:"",new_password_disabled:!0,old_password_disabled:!0,update_password_disabled:!0,old_password_show:!1,new_password_show:!1,updating:!1}},components:{msg:e.a},created:function(){document.title="修改密碼"},computed:{error:function(){return this.$store.state.error},api_prefix:function(){return this.$store.state.api_prefix}},methods:{pw_title:function(s){return s?"顯示密碼":"隱藏密碼"},pw_type:function(s){return s?"text":"password"},old_password_toggle_button:function(s){this.old_password_show=s.target.checked},new_password_toggle_button:function(s){this.new_password_show=s.target.checked},between:function(s,o,t){return s>=o&&s<=t},ban_update_password:function(){this.old_password_disabled=!this.between(this.old_password.length,8,32),this.new_password_disabled=this.new_password!==this.new_password_confirm||!this.between(this.new_password.length,8,32),this.update_password_disabled=this.old_password_disabled||this.new_password_disabled},to_update_password:function(){var s=this;if(!this.update_password_disabled){this.updating=!0;var o=this.api_prefix.concat("update-password");axios.patch(o,{old_password:this.old_password,new_password:this.new_password,new_password_confirm:this.new_password_confirm}).then((function(o){var t=o.status,e=o.message;t?s.$router.push({name:"index"}).catch((function(){})):(s.$store.commit("show_error",e),s.update_password_disabled=!1)})).catch((function(o){if(422===o.status){var t="",e=o.data.errors;Object.keys(e).forEach((function(s){t+=e[s]+"\n"})),s.$store.commit("show_error",t)}else s.$store.commit("show_error","發生錯誤: "+o.status);s.update_password_disabled=!1})).finally((function(){s.updating=!1}))}}}}),r=t("KHd+"),d=Object(r.a)(a,(function(){var s=this,o=s.$createElement,t=s._self._c||o;return t("div",{staticClass:"container",staticStyle:{color:"var(--form-control-color)"}},[t("div",{staticClass:"row justify-content-center"},[t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"card",staticStyle:{"background-color":"var(--form-control-bg-color)"}},[t("div",{staticClass:"card-header"},[s._v("修改密碼")]),s._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 col-form-label text-md-right"},[s._v("舊密碼")]),s._v(" "),t("div",{staticClass:"col-md-8"},["checkbox"===s.pw_type(s.old_password_show)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.old_password,expression:"old_password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.old_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(s.old_password)?s._i(s.old_password,null)>-1:s.old_password},on:{input:s.ban_update_password,change:function(o){var t=s.old_password,e=o.target,a=!!e.checked;if(Array.isArray(t)){var r=s._i(t,null);e.checked?r<0&&(s.old_password=t.concat([null])):r>-1&&(s.old_password=t.slice(0,r).concat(t.slice(r+1)))}else s.old_password=a}}}):"radio"===s.pw_type(s.old_password_show)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.old_password,expression:"old_password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.old_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"radio"},domProps:{checked:s._q(s.old_password,null)},on:{input:s.ban_update_password,change:function(o){s.old_password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.old_password,expression:"old_password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.old_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:s.pw_type(s.old_password_show)},domProps:{value:s.old_password},on:{input:[function(o){o.target.composing||(s.old_password=o.target.value)},s.ban_update_password]}})]),s._v(" "),t("div",{staticClass:"show-hide-toggle-button"},[t("input",{attrs:{type:"checkbox",id:"old_password_toggle_button"},on:{click:s.old_password_toggle_button}}),s._v(" "),t("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"old_password_toggle_button",title:s.pw_title(s.old_password_show)}},[s._v("Toggle")])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 col-form-label text-md-right"},[s._v("新密碼")]),s._v(" "),t("div",{staticClass:"col-md-8"},["checkbox"===s.pw_type(s.new_password_show)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password,expression:"new_password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(s.new_password)?s._i(s.new_password,null)>-1:s.new_password},on:{input:s.ban_update_password,change:function(o){var t=s.new_password,e=o.target,a=!!e.checked;if(Array.isArray(t)){var r=s._i(t,null);e.checked?r<0&&(s.new_password=t.concat([null])):r>-1&&(s.new_password=t.slice(0,r).concat(t.slice(r+1)))}else s.new_password=a}}}):"radio"===s.pw_type(s.new_password_show)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password,expression:"new_password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"radio"},domProps:{checked:s._q(s.new_password,null)},on:{input:s.ban_update_password,change:function(o){s.new_password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password,expression:"new_password"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:s.pw_type(s.new_password_show)},domProps:{value:s.new_password},on:{input:[function(o){o.target.composing||(s.new_password=o.target.value)},s.ban_update_password]}}),s._v(" "),t("div",{staticStyle:{"font-size":"12px",margin:"4px 8px"}},[s._v("請介於8到32字元之間")])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-md-3 col-form-label text-md-right"},[s._v("確認新密碼")]),s._v(" "),t("div",{staticClass:"col-md-8"},["checkbox"===s.pw_type(s.new_password_show)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password_confirm,expression:"new_password_confirm"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"checkbox"},domProps:{checked:Array.isArray(s.new_password_confirm)?s._i(s.new_password_confirm,null)>-1:s.new_password_confirm},on:{input:s.ban_update_password,change:function(o){var t=s.new_password_confirm,e=o.target,a=!!e.checked;if(Array.isArray(t)){var r=s._i(t,null);e.checked?r<0&&(s.new_password_confirm=t.concat([null])):r>-1&&(s.new_password_confirm=t.slice(0,r).concat(t.slice(r+1)))}else s.new_password_confirm=a}}}):"radio"===s.pw_type(s.new_password_show)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password_confirm,expression:"new_password_confirm"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:"radio"},domProps:{checked:s._q(s.new_password_confirm,null)},on:{input:s.ban_update_password,change:function(o){s.new_password_confirm=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password_confirm,expression:"new_password_confirm"}],staticClass:"form-control",class:s.$store.getters.disabled_class(s.new_password_disabled),staticStyle:{width:"100%"},attrs:{type:"password",autocomplete:"off",required:"",autofocus:"",type:s.pw_type(s.new_password_show)},domProps:{value:s.new_password_confirm},on:{input:[function(o){o.target.composing||(s.new_password_confirm=o.target.value)},s.ban_update_password]}})]),s._v(" "),t("div",{staticClass:"show-hide-toggle-button"},[t("input",{attrs:{type:"checkbox",id:"new_password_toggle_button"},on:{click:s.new_password_toggle_button}}),s._v(" "),t("label",{staticStyle:{"margin-bottom":"0"},attrs:{for:"new_password_toggle_button",title:s.pw_title(s.new_password_show)}},[s._v("Toggle")])])]),s._v(" "),t("button",{staticClass:"btn btn-primary btn-block",class:{"btn-loading":s.updating},staticStyle:{margin:"0 0"},attrs:{type:"button",disabled:"",disabled:s.update_password_disabled},on:{click:s.to_update_password}},[s._v("修改\n                    ")])]),s._v(" "),s.error.status?t("div",{staticClass:"card-footer"},[t("msg",{staticStyle:{"text-align":"center"}},[s._v(s._s(s.error.message))])],1):s._e()])])])])}),[],!1,null,null,null);o.default=d.exports},v9aq:function(s,o,t){"use strict";var e;t.d(o,"a",(function(){return d}));var a,r,d=t("nFaw").a.div(e||(a=["\n    color: #9A0000;\n"],r||(r=a.slice(0)),e=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))))}}]);