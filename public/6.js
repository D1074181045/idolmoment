(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0jpQ":function(t,e,i){"use strict";i.r(e);var a=i("v9aq"),s=new RegExp("^[㄀-ㄯ一-龥a-zA-Z0-9 ]+$"),n={data:function(){return{class_signature_disabled:!1,next_ability:{}}},components:{msg:a.a},computed:{signature:function(){return this.profile.signature},signature_disabled:function(){return this.$store.state.ban_type.signature.status},activity_disabled:function(){return this.$store.state.ban_type.activity.status},profile:function(){return this.$store.state.profile},teetee_info:function(){return this.$store.state.teetee_info},cool_down:function(){return this.$store.state.cool_down},signature_ban:function(){return this.$store.state.ban_type.signature},activity_ban:function(){return this.$store.state.ban_type.activity},api_prefix:function(){return this.$store.state.api_prefix}},beforeRouteLeave:function(t,e,i){var a=this;Object.keys(this.next_ability).forEach((function(t){a.next_ability[t]&&(a.profile[t]=a.next_ability[t])})),i()},mounted:function(){this.$store.commit("cool_down","activity"),this.$store.commit("cool_down","signature")},activated:function(){document.title="我的偶像",this.next_ability={},this.first_load?this.first_load=!1:this.$store.dispatch("load_my_profile")},methods:{set_teetee:function(){var t=this;if(!(this.profile.teetee.length>12||!this.profile.teetee.match(s)&&0!==this.profile.teetee.length)){var e=this.api_prefix.concat("update-teetee");axios.patch(e,{teetee:this.profile.teetee}).then((function(e){var i=e.teetee_status,a=e.teetee_name;t.teetee_info.status=i,t.teetee_info.teetee_name=a}))}},set_signature:function(){var t=this;if(!this.signature_ban.status){var e=this.api_prefix.concat("update-signature");this.signature_ban.status=!0,axios.patch(e,{signature:this.signature}).then((function(e){var i=e.status,a=e.signature_time;i?(t.cool_down.signature=a,t.$store.commit("cool_down","signature")):t.signature_ban.status=!1})).catch((function(e){t.signature_ban.status=!1}))}},ban_signature:function(){this.signature_ban.time||(this.signature_ban.status=this.signature&&!this.signature.match(s)||this.signature.length>30,this.class_signature_disabled=this.signature&&!this.signature.match(s)||this.signature.length>30)},do_activity:function(t){var e=this;if(!this.activity_ban.status){var i=this.api_prefix.concat("activity");this.activity_ban.status=!0,axios.patch(i,{activity_type:t}).then((function(t){var i=t.status,a=t.ability,s=t.activity_time;i?(e.cool_down.activity=s,e.$store.commit("cool_down","activity"),Object.keys(a).forEach((function(t){e.profile[t]=e.next_ability[t]?e.next_ability[t]:e.profile[t],e.next_ability[t]=e.profile[t]!==a[t]?a[t]:null}))):e.activity_ban.status=!1})).catch((function(t){e.activity_ban.status=!1}))}}}},r=(i("cLCe"),i("KHd+")),o=Object(r.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tb"},[i("h3",[t._v("我的偶像")]),t._v(" "),i("table",{staticClass:"table"},[i("tbody",[i("tr",[i("th",{staticClass:"table-active"},[t._v("暱稱")]),t._v(" "),i("td",[t._v(t._s(t.profile.nickname))]),t._v(" "),i("td",{staticStyle:{width:"80px"},attrs:{rowspan:"2"}},[i("div",{staticClass:"img-big"},[i("picture",[i("source",{attrs:{type:"image/png",srcset:t.characters_img_path(t.profile.use_character.img_file_name)}}),t._v(" "),i("img",{attrs:{src:t.characters_img_path(t.profile.use_character.img_file_name),alt:t.characters_img_path(t.profile.use_character.tc_name)}})])])])]),t._v(" "),i("tr",[i("th",{staticClass:"table-active"},[t._v("偶像")]),t._v(" "),i("td",[t._v(t._s(t.profile.use_character.tc_name))])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("人氣")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.popularity))+"\n                    "),t.next_ability.popularity?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.popularity))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("名聲")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.reputation))+"\n                    "),t.next_ability.reputation?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.reputation))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("最大生命值")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.max_vitality))+"\n                    "),t.next_ability.max_vitality?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.max_vitality))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("目前生命值")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.current_vitality))+"\n                    "),t.next_ability.current_vitality?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.current_vitality))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("精力")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.energy))+"\n                    "),t.next_ability.energy?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.energy))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("抗壓性")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.resistance))+"\n                    "),t.next_ability.resistance?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.resistance))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-info"},[t._v("魅力")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.charm))+"\n                    "),t.next_ability.charm?i("div",{staticStyle:{display:"inline"}},[t._v("\n                        → "+t._s(t.$store.getters.NumberFormat(t.next_ability.charm))+"\n                    ")]):t._e()])]),t._v(" "),i("tr",[i("th",{staticClass:"table-secondary"},[t._v("轉生次數")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$store.getters.NumberFormat(t.profile.rebirth_counter)))])])])])]),t._v(" "),i("div",{staticClass:"tb"},[i("h3",[t._v("個人設定")]),t._v(" "),t.signature_ban.time?i("msg",[t._v("剩餘時間："+t._s(t.signature_ban.time))]):t._e(),t._v(" "),i("div",{staticClass:"tb-gap"},[i("div",{staticClass:"setting"},[i("label",{staticStyle:{width:"80px","margin-bottom":"0"}},[t._v("簽名檔")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.signature,expression:"profile.signature"}],staticClass:"form-control",class:t.$store.getters.disabled_class(t.class_signature_disabled),attrs:{placeholder:"最多30個字",type:"text"},domProps:{value:t.profile.signature},on:{input:[function(e){e.target.composing||t.$set(t.profile,"signature",e.target.value)},t.ban_signature]}}),t._v(" "),i("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.signature_disabled},on:{click:t.set_signature}},[t._v("更新")])]),t._v(" "),i("div",{staticClass:"setting"},[i("label",{staticStyle:{width:"80px","margin-bottom":"0"}},[t._v("貼貼")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.teetee,expression:"profile.teetee"}],staticClass:"form-control",class:t.$store.getters.disabled_class(!t.teetee_info.status),attrs:{type:"text",maxlength:"12"},domProps:{value:t.profile.teetee},on:{input:function(e){e.target.composing||t.$set(t.profile,"teetee",e.target.value)}}}),t._v(" "),i("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.set_teetee}},[t._v("設定")])])])],1),t._v(" "),t.profile.graduate?i("div",{staticClass:"tb"},[i("h3",[t._v("已畢業，無法進行活動")]),t._v(" "),t._m(0)]):i("div",{staticClass:"tb"},[i("h3",[t._v("進行活動")]),t._v(" "),t.activity_ban.time?i("msg",[t._v("剩餘時間："+t._s(t.activity_ban.time))]):t._e(),t._v(" "),i("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("adult-live")}}},[t._v("成人直播")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("live")}}},[t._v("直播")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("do-good-things")}}},[t._v("做善事")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("go-to-sleep")}}},[t._v("睡覺")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:t.activity_disabled},on:{click:function(e){return t.do_activity("meditation")}}},[t._v("打坐")])])],1)])}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tb-gap",staticStyle:{"margin-left":"-10px"}},[i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("成人直播")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("直播")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("做善事")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("睡覺")]),t._v(" "),i("button",{staticClass:"btn btn-bottom btn-info",attrs:{type:"button",disabled:""}},[t._v("打坐")])])}],!1,null,"526f30aa",null);e.default=o.exports},"ZN+/":function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"\n.tb .tb-gap[data-v-526f30aa] {\n    margin-top: 15px;\n    margin-bottom: 10px;\n}\nbutton.btn.btn-bottom[data-v-526f30aa] {\n    margin-bottom: 12px;\n    margin-right: 3px;\n}\n",""])},cLCe:function(t,e,i){"use strict";i("gM0i")},gM0i:function(t,e,i){var a=i("ZN+/");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},v9aq:function(t,e,i){"use strict";var a;i.d(e,"a",(function(){return r}));var s,n,r=i("nFaw").a.div(a||(s=["\n    color: #9A0000;\n"],n||(n=s.slice(0)),a=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(n)}}))))}}]);